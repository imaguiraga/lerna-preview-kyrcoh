{"version":3,"sources":["reportWebVitals.ts","../../topology-dsl-core/src/dsl/core-dsl/resource-base.js","../../topology-dsl-core/src/dsl/core-dsl/resource-elt.js","../../topology-dsl-core/src/dsl/core-dsl/base-icons-map.js","../../topology-dsl-core/src/dsl/core-dsl/resource-dsl.js","preview/diagram/visitor/uid-flow-visitor.js","preview/diagram/visitor/elk-dimension-visitor.js","../../topology-dsl-core/src/dsl/core-dsl/util.js","preview/diagram/elk/elk-layout-factory.js","preview/diagram/elk/node/reource-node.tsx","preview/diagram/elk/x6-elk-renderer.js","sample.js","index.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","idGenFn","prefix","index","NODEIDGENFN","ResourceElt","elts","kind","tagName","provider","this","idGenIt","title","nostart","noend","id","next","value","compound","tags","direction","_start","_finish","data","name","eltsFrom","eltsTo","r","resolveElt","push","toString","isTerminal","val","result","undefined","Array","isArray","map","elt","filter","e","call","err","console","error","message","el","toElt","visitor","filterFn","visit","length","splice","tmp","split","join","tag","key","from","to","forEach","values","v","includes","CompositeResourceElt","initElts","WORKFLOW_PROVIDER","GROUP","GroupElt","OPTIONAL","OptionalElt","REPEAT","RepeatElt","SEQUENCE","SequenceElt","BASE_ICONS_MAP","Map","className","iconURL","STYLE","fanIn","fanInTo","sequence","_tagName_","_set_","get","_nostart_","fanOut","fanOutFrom","_noend_","choice","fanOutElts","fanOut_fanIn","optional","repeat","oneOrMore","zeroOrMore","group","source","sink","prototype","merge","branch","ELKDimensionVisitor","nodeWidth","nodeHeight","iconWidth","portSize","labelHeight","_nodeWidth","_nodeHeight","_iconWidth","_portSize","_labelHeight","root","n","stack","i","tree","width","height","x","y","children","model","properties","style","len","w","Math","floor","nl","h","ports","p","labels","l","elkLayout","elkDimensionVisitor","elk","ELK","options","UNIT","layoutFn","inelkgraph","Promise","resolve","elkgraph","knownLayoutOptions","d","layout","layoutOptions","logging","measureExecutionTime","elkLayoutRelative","elkNode","ax","ay","edges","t","sources","target","targets","sections","s","junctionPoints","j","startPoint","endPoint","bendPoints","b","c","toAbsoluteElkLayoutIt","toAbsoluteElkLayout","newSize","arguments","nodeSize","newOptions","ResourceNode","node","props","hasChanged","getData","iconPath","encodeURI","display","src","margin","product","React","Component","Graph","registerNode","inherit","component","LINE","registerRouter","vertices","args","view","Point","create","EMPTY_ARRAY","toX6LayoutRec","elkLayoutNode","x6Layout","nodes","createX6Node","createX6Edge","attrs","body","class","fo","clazz","PORT_RADIUS","items","groups","abs","position","zIndex","circle","magnet","text","fontSize","fill","label","shape","rx","ry","createX6Label","strokeWidth","opacity","line","sourceMarker","startArrow","size","targetMarker","endArrow","regex1","regex2","match","cell","replace","port","bp","contentPane","document","getElementById","selectElt","minimapContainer","setAttribute","renderer","_container_","_minimap_","_width_","_height_","_iconWidth_","containerElt","x6Graph","scrollWidth","scrollHeight","container","grid","background","color","interacting","async","frozen","sorting","scroller","enabled","pannable","pageVisible","pageBreak","panning","modifiers","mousewheel","connecting","allowBlank","allowLoop","highlight","anchor","connector","connectionPoint","router","minimap","minScale","maxScale","padding","on","isNode","addTools","useCellGeometry","stroke","strokeDasharray","fillOpacity","removeTools","createX6Graph","toElkLayout","render","lookup","set","buildNodeLookup","refreshLayoutFn","_elkgraph_","log","JSON","stringify","start","Date","getTime","fromJSON","unfreeze","progress","done","time","batchSize","zoomToFit","catch","collapsed","_children","_edges","graph","diagram","listener","curParams","messageCallbackFn","event","jsonrpc","method","params","curSelection","has","firstChild","remove","opt","createElement","add","removeEventListener","addEventListener","dispatchEvent","Event","updateSelection","window","origin","location","resize","documentElement","clientWidth","clientHeight","offsetHeight","centerContent"],"mappings":"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","file":"static/js/main.1e51387c.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","/**\r\n * idGenFn function.\r\n */\r\nfunction* idGenFn(prefix, index) {\r\n  while (index >= 0) {\r\n    let reset = yield index++;\r\n    if (reset) {\r\n      index = 0;\r\n    }\r\n  }\r\n}\r\n\r\nexport const NODEIDGENFN = idGenFn('node.', 0);\r\n\r\n/**\r\n * Class ResourceElt.\r\n */\r\nexport class ResourceElt {\r\n  /**\r\n   * Create a ResourceElt.\r\n   * @param {object} elts - The elts value.\r\n   * @param {string} kind - The kind value.\r\n   * @param {string} tagName - The tagName value.\r\n   * @param {string} provider - The resource provider value.\r\n   */\r\n  constructor(elts, kind, tagName, provider) {\r\n    // Next Id Generator\r\n    this.idGenIt = NODEIDGENFN;\r\n    this.title = 'title';\r\n\r\n    // Add start finish nodes\r\n    this.nostart = false;\r\n    this.noend = false;\r\n\r\n    //get new id\r\n    this.kind = kind || 'resource';\r\n    this.tagName = tagName || 'resource';\r\n    this.id = this.tagName + '.' + this.idGenIt.next().value;\r\n    this.provider = provider;\r\n    this.compound = false;\r\n    this.tags = [];\r\n\r\n    // Layout direction\r\n    this.direction = null;\r\n\r\n    this._start = null;\r\n    this._finish = null;\r\n\r\n    this.data = {};\r\n    this.name = this.id;\r\n    this.title = this.id;\r\n\r\n    this.elts = [];\r\n    this.eltsFrom = [];\r\n    this.eltsTo = [];\r\n\r\n    let r = this.resolveElt(elts);\r\n    if (r !== null) {\r\n      // only one elt can be added\r\n      this.elts.push(r);\r\n      this.title = r.toString();\r\n    }\r\n\r\n  }\r\n\r\n  _up_() {\r\n    this.direction = 'UP';\r\n    return this;\r\n  }\r\n\r\n  _down_() {\r\n    this.direction = 'DOWN';\r\n    return this;\r\n  }\r\n\r\n  _left_() {\r\n    this.direction = 'LEFT';\r\n    return this;\r\n  }\r\n\r\n  _right_() {\r\n    this.direction = 'RIGHT';\r\n    return this;\r\n  }\r\n\r\n  get start() {\r\n    if (this._start == null) {\r\n      this._start = {\r\n        kind: this.kind,\r\n        tagName: this.tagName,\r\n        id: this.id + '.start',\r\n        provider: this.provider,\r\n        compound: this.compound,\r\n        isTerminal: () => true,\r\n        elts: []\r\n      };\r\n    }\r\n\r\n    return this._start;\r\n  }\r\n\r\n  set start(val) {\r\n    this._start = val;\r\n  }\r\n\r\n  get finish() {\r\n    if (this._finish == null) {\r\n      this._finish = {\r\n        kind: this.kind,\r\n        tagName: this.tagName,\r\n        id: this.id + '.finish',\r\n        provider: this.provider,\r\n        compound: this.compound,\r\n        isTerminal: () => true,\r\n        elts: []\r\n      };\r\n    }\r\n    return this._finish;\r\n\r\n  }\r\n\r\n  set finish(val) {\r\n    this._finish = val;\r\n  }\r\n\r\n  isTerminal() {\r\n    return true;\r\n  }\r\n\r\n  isGroup() {\r\n    return (this.kind === 'group');\r\n  }\r\n\r\n  initElts(elts) {\r\n    let result = [];\r\n    if (elts === undefined || elts === null) {\r\n      return result;\r\n    }\r\n\r\n    if (Array.isArray(elts)) {\r\n      result = elts.map(\r\n        (elt) => { return this.resolveElt(elt); }, this\r\n      ).filter(e => { return e != null; }, this);\r\n\r\n    } else {\r\n      let r = this.resolveElt(elts);\r\n      if (r != null) {\r\n        result.push(r);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  resolveElt(elt) {\r\n    // Only accept primitive types as Terminal Element \r\n    let result = null;\r\n    if (elt !== undefined) {\r\n      try {\r\n        if (typeof elt === 'function') {\r\n          result = elt.call();\r\n        }\r\n\r\n        if (typeof result === 'object' && elt instanceof ResourceElt) {\r\n          // Allow complex element as terminal\r\n          result = elt;\r\n\r\n        } else {\r\n          // primitive\r\n          result = elt.toString();\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error(err.message + ' - ' + err);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  toElt(elt) {\r\n    let result = null;\r\n    if (elt !== undefined && elt !== null) {\r\n      result = elt;\r\n      if (result instanceof ResourceElt) {\r\n        return result;\r\n      } else {\r\n        try {\r\n          if (typeof elt === 'function') {\r\n            result = elt.call();\r\n          }\r\n\r\n          if (result instanceof ResourceElt) {\r\n            return result;\r\n          } else if (typeof result === 'object') {\r\n            // Allow complex element as terminal\r\n            if (Array.isArray(elt)) {\r\n              result = elt.map(\r\n                (el) => { return this.toElt(el); }, this\r\n              ).filter((el) => { return el != null; }, this);\r\n\r\n            } else {\r\n              result = this.toElt(elt);\r\n            }\r\n\r\n          } else {\r\n            // very likely a primitive type\r\n            result = new ResourceElt(elt, 'resource', 'resource', this.provider);\r\n          }\r\n\r\n        } catch (err) {\r\n          console.error(err.message + ' - ' + err);\r\n        }\r\n      }\r\n    }\r\n    // default to object\r\n    return result;\r\n  }\r\n\r\n  foundElt(elt) {\r\n    return this.id === elt.id;\r\n  }\r\n\r\n  accept(visitor, filterFn) {\r\n    return visitor.visit(this, filterFn);\r\n  }\r\n\r\n  _add_(elt) {\r\n    let r = this.resolveElt(elt);\r\n    if (r !== null) {\r\n      // only one elt can be added\r\n      if (this.elts.length > 0) {\r\n        this.elts.splice(0, this.elts.length);\r\n      }\r\n      this.elts.push(r);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _tagName_(value) {\r\n    if (value) {\r\n      this.tagName = value;\r\n      // Replace prefix with tagName\r\n      let tmp = this.id.split('\\.');\r\n      tmp[0] = this.tagName;\r\n      this.id = tmp.join('.');\r\n      // Add to tags set\r\n      this.tag(value);\r\n      \r\n    }\r\n    return this;\r\n  }\r\n\r\n  _title_(value) {\r\n    this.title = value;\r\n    return this;\r\n  }\r\n\r\n  _name_(value) {\r\n    this.name = value;\r\n    return this;\r\n  }\r\n\r\n  _id_(value) {\r\n    this.id = value;\r\n    return this;\r\n  }\r\n\r\n  _set_(key, value) {\r\n    this.data[key] = value;\r\n    return this;\r\n  }\r\n\r\n  _get_(key) {\r\n    return this.data[key];\r\n  }\r\n\r\n  // Inbound bindings\r\n  _in_(...elts) {\r\n    return this.from(...elts);\r\n  }\r\n\r\n  // Outbound bindings\r\n  _out_(...elts) {\r\n    return this.to(...elts);\r\n  }\r\n\r\n  to(...elts) {\r\n    if (Array.isArray(elts)) {\r\n      elts.forEach((elt) => {\r\n        this.eltsTo.push(this.toElt(elt));\r\n      }, this);\r\n\r\n    } else {\r\n      this.eltsTo.push(this.toElt(elts));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  from(...elts) {\r\n    if (Array.isArray(elts)) {\r\n      elts.forEach((elt) => {\r\n        this.eltsFrom.push(this.toElt(elt));\r\n      }, this);\r\n\r\n    } else {\r\n      this.eltsFrom.push(this.toElt(elts));\r\n    }\r\n    return this;\r\n  }\r\n \r\n  tag(...values) {\r\n    // Add only to tags if it doesn't exist\r\n    if (Array.isArray(values)) {\r\n      values.forEach((v) => {\r\n        if (!this.tags.includes(v)) {\r\n          this.tags.push(v);\r\n        }\r\n      }, this);\r\n\r\n    } else {\r\n      if (!this.tags.includes(values)) {\r\n        this.tags.push(values);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _noend_(value) {\r\n    this.noend = value;\r\n    return this;\r\n  }\r\n\r\n  _nostart_(value) {\r\n    this.nostart = value;\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n * Class CompositeResourceElt.\r\n * @extends ResourceElt\r\n */\r\nexport class CompositeResourceElt extends ResourceElt {\r\n  /**\r\n   * Create a CompositeResourceElt.\r\n   * @param {object} elts - The elts value.\r\n   * @param {string} kind - The kind value.\r\n   * @param {string} tagName - The tagName value.\r\n   * @param {string} provider - The resource provider value.\r\n   */\r\n  constructor(elts, kind, tagName, provider) {\r\n    super(elts, kind, tagName, provider);\r\n    this.elts = [];\r\n    this.title = null;\r\n    this._start = null;\r\n    this._finish = null;\r\n    //this.start = new ResourceElt('start', 'resource', 'mark', provider);\r\n    //this.finish = new ResourceElt('finish', 'resource', 'mark', provider);\r\n    this.compound = true;\r\n\r\n    this.elts = this.initElts(elts);//this.resolveElt(elts);//\r\n\r\n    if (this.title === null) {\r\n      this.title = '' + this.id;\r\n    }\r\n  }\r\n\r\n  isTerminal() {\r\n    return false;\r\n  }\r\n\r\n  resolveElt(elt) {\r\n    return this.toElt(elt);\r\n  }\r\n\r\n  foundElt(elt) {\r\n    return this.elts.filter(e => e.id === elt.id, this).length > 0;\r\n  }\r\n\r\n  _add_(...elts) {\r\n    if (Array.isArray(elts)) {\r\n      elts.forEach((e) => {\r\n        let r = this.resolveElt(e);\r\n        if (r != null) {\r\n          this.elts.push(r);\r\n        }\r\n      }, this);\r\n\r\n    } else {\r\n      let r = this.resolveElt(elts);\r\n      if (r != null) {\r\n        this.elts.push(r);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n}\r\n","import {\r\n  CompositeResourceElt,\r\n  ResourceElt\r\n} from './resource-base.js';\r\n\r\nexport const WORKFLOW_KIND = 'workflow';\r\nexport const WORKFLOW_PROVIDER = 'default';\r\n\r\nconst GROUP = 'group';\r\n/**\r\n * Class GroupElt.\r\n * @extends CompositeResourceElt\r\n */\r\nexport class GroupElt extends CompositeResourceElt {\r\n  /**\r\n   * Create a SequenceElt.\r\n   * @param {object} elts - The elts value.\r\n   */\r\n  constructor(elts) {\r\n    super(elts, GROUP, GROUP, WORKFLOW_PROVIDER);\r\n  }\r\n\r\n}\r\n\r\nconst OPTIONAL = 'optional';\r\n/**\r\n * Class OptionalElt.\r\n * @extends CompositeResourceElt\r\n */\r\nexport class OptionalElt extends CompositeResourceElt {\r\n  /**\r\n   * Create a OptionalElt.\r\n   * @param {object} elts - The elts value.\r\n   */\r\n  constructor(elts) {\r\n    super(elts, OPTIONAL, OPTIONAL, WORKFLOW_PROVIDER);\r\n  }\r\n\r\n  _add_(elt) {\r\n    // only one elt can be added\r\n    if (this.elts.length > 0) {\r\n      this.elts.splice(0, this.elts.length);\r\n    }\r\n    this.elts.push(this.resolveElt(elt));\r\n    return this;\r\n  }\r\n}\r\n\r\nconst REPEAT = 'repeat';\r\n/**\r\n * Class RepeatElt.\r\n * @extends CompositeResourceElt\r\n */\r\nexport class RepeatElt extends CompositeResourceElt {\r\n  /**\r\n   * Create a RepeatElt.\r\n   * @param {object} elts - The elts value.\r\n   */\r\n  constructor(elts) {\r\n    super(elts, REPEAT, REPEAT, WORKFLOW_PROVIDER);\r\n  }\r\n\r\n  _add_(elt) {\r\n    // only one elt can be added\r\n    if (this.elts.length > 0) {\r\n      this.elts.splice(0, this.elts.length);\r\n    }\r\n    this.elts.push(this.resolveElt(elt));\r\n    return this;\r\n  }\r\n}\r\n\r\nconst SEQUENCE = 'sequence';\r\n/**\r\n * Class SequenceElt.\r\n * @extends CompositeResourceElt\r\n */\r\nexport class SequenceElt extends CompositeResourceElt {\r\n  /**\r\n   * Create a SequenceElt.\r\n   * @param {object} elts - The elts value.\r\n   */\r\n  constructor(elts) {\r\n    super(elts, SEQUENCE, SEQUENCE, WORKFLOW_PROVIDER);\r\n  }\r\n\r\n}\r\n\r\nconst RESOURCE = 'resource';\r\n/**\r\n * Class TerminalElt.\r\n */\r\nexport class TerminalElt extends ResourceElt {\r\n\r\n  /**\r\n   * Create a TerminalElt.\r\n   * @param {object} elt - The elt value.\r\n   */\r\n  constructor(elt) {\r\n    super(elt, RESOURCE, RESOURCE, WORKFLOW_PROVIDER);\r\n  }\r\n\r\n}\r\n","export const WORKFLOW_KIND = 'workflow';\r\nexport const WORKFLOW_PROVIDER = 'default';\r\n\r\nexport const BASE_ICONS_MAP = new Map([\r\n  ['fanOut_fanIn', { className: 'fanOut_fanIn', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut_fanIn-diagram-3-fill.svg' }],\r\n  ['choice', { className: 'choice', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut_fanIn-diagram-3-fill.svg' }],\r\n  ['fanIn', { className: 'fanIn', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanIn-diagram-3-fill.svg' }],\r\n  ['merge', { className: 'merge', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanIn-diagram-3-fill.svg' }],\r\n  ['fanOut', { className: 'fanOut', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['branch', { className: 'branch', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['split', { className: 'split', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['tree', { className: 'tree', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['link', { className: 'link', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['use', { className: 'use', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['parallel', { className: 'parallel', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/fanOut-diagram-3-fill.svg' }],\r\n  ['optional', { className: 'optional', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/optional-question-square-fill.svg' }],\r\n  ['repeat', { className: 'repeat', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/repeat-bootstrap-reboot.svg' }],\r\n  ['sequence', { className: 'sequence', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/sequence-diagram-3-fill.svg' }],\r\n  ['resource', null],\r\n  ['state', null],\r\n  ['zeroOrMore', { className: 'zeroOrMore', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/repeat-bootstrap-reboot.svg' }],\r\n  ['oneOrMore', { className: 'oneOrMore', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/repeat-bootstrap-reboot.svg' }],\r\n  ['group', { className: 'group', provider: WORKFLOW_PROVIDER, iconURL: 'assets/icons/base/group-grid-fill.svg' }]\r\n]\r\n);","import {\r\n  OptionalElt,\r\n  RepeatElt,\r\n  SequenceElt,\r\n  TerminalElt,\r\n  GroupElt\r\n} from './resource-elt.js';\r\n\r\nimport { BASE_ICONS_MAP } from './base-icons-map';\r\nimport { ResourceElt } from './resource-base.js';\r\nconst STYLE = 'style';\r\n\r\n\r\n/**\r\n * Create a fanIn dsl tree.\r\n * @param {array|object} elts - The elements fanning in.\r\n * @param {object} fanInTo - The fanInTo element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function fanIn(elts, fanInTo) {\r\n  return sequence(elts, fanInTo)\r\n    ._tagName_('fanIn')\r\n    ._set_(STYLE, BASE_ICONS_MAP.get('fanIn'))\r\n    ._nostart_(true);\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.fanIn = function (elts, fanInTo) {\r\n  let elt = fanIn(elts, fanInTo);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a fanOut dsl tree.\r\n * @param {object} fanOutFrom - The fanOutFrom element.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function fanOut(fanOutFrom, elts) {\r\n  return sequence(fanOutFrom, elts)\r\n    ._tagName_('fanOut')\r\n    ._set_(STYLE, BASE_ICONS_MAP.get('fanOut'))\r\n    ._noend_(true);\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.fanOut = function (fanOutFrom, elts) {\r\n  let elt = fanOut(fanOutFrom, elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a fanInOut dsl tree.\r\n * @param {array|object} fanInElts - The fanInElts element.\r\n * @param {object} fanInTo - The fanInTo element.\r\n * @param {array|object} fanOutElts - The fanOutElts elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function fanIn_fanOut(fanInElts, fanInTo, fanOutElts) {\r\n  return sequence(fanInElts, fanInTo, fanOutElts)\r\n    ._tagName_('fanIn_fanOut')\r\n    ._set_(STYLE, BASE_ICONS_MAP.get('fanIn_fanOut'))\r\n    ._nostart_(true)\r\n    ._noend_(true);\r\n}\r\n\r\n/**\r\n * Create a fanInOut dsl tree.\r\n * @param {object} fanOutFrom - The fanOutFrom element.\r\n * @param {array|object} fanOutElts - The fanOutElts elements.\r\n * @param {object} fanInTo - The fanInTo element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function fanOut_fanIn(fanOutFrom, fanOutElts, fanInTo) {\r\n  return sequence(fanOutFrom, fanOutElts, fanInTo)._tagName_('fanOut_fanIn')._set_(STYLE, BASE_ICONS_MAP.get('fanOut_fanIn'));\r\n}\r\n\r\n/**\r\n * Create a choice dsl tree.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function choice(fanOutFrom, fanOutElts, fanInTo) {\r\n  return fanOut_fanIn(fanOutFrom, fanOutElts, fanInTo)._tagName_('choice')._set_(STYLE, BASE_ICONS_MAP.get('choice'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.choice = function (fanOutFrom, fanOutElts, fanInTo) {\r\n  let elt = choice(fanOutFrom, fanOutElts, fanInTo);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a merge dsl tree.\r\n * @param {array|object} elts - The elements fanning in.\r\n * @param {object} fanInTo - The fanInTo element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function merge(elts, fanInTo) {\r\n  return fanIn(elts, fanInTo)._tagName_('fanIn')._set_(STYLE, BASE_ICONS_MAP.get('merge'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.merge = function (elts, fanInTo) {\r\n  let elt = merge(elts, fanInTo);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a branch dsl tree.\r\n * @param {object} fanOutFrom - The fanOutFrom element.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function branch(fanOutFrom, elts) {\r\n  return fanOut(fanOutFrom, elts)._tagName_('branch')._set_(STYLE, BASE_ICONS_MAP.get('branch'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.branch = function (fanOutFrom, elts) {\r\n  let elt = branch(fanOutFrom, elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a split dsl tree.\r\n * @param {object} fanOutFrom - The fanOutFrom element.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function split(fanOutFrom, elts) {\r\n  return fanOut(fanOutFrom, elts)._tagName_('split')._set_(STYLE, BASE_ICONS_MAP.get('split'));\r\n}\r\n\r\n/**\r\n * Create an optional dsl tree.\r\n * @param {object} elt - The element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function optional(elt) {\r\n  return new OptionalElt(elt)._set_(STYLE, BASE_ICONS_MAP.get('optional'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.optional = function (...elts) {\r\n  let elt = optional(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a repeat dsl tree.\r\n * @param {object} elt - The element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function repeat(elt) {\r\n  return new RepeatElt(elt)._set_(STYLE, BASE_ICONS_MAP.get('repeat'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.repeat = function (...elts) {\r\n  let elt = repeat(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a oneOrMore dsl tree.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function oneOrMore(elt) {\r\n  return repeat(elt)._set_(STYLE, BASE_ICONS_MAP.get('oneOrMore'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.oneOrMore = function (...elts) {\r\n  let elt = oneOrMore(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a sequence dsl tree.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function sequence(...elts) {\r\n  return new SequenceElt([...elts])._set_(STYLE, BASE_ICONS_MAP.get('sequence'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.sequence = function (...elts) {\r\n  let elt = sequence(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a terminal dsl tree.\r\n * @param {object} elt - The element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function terminal(elt) {\r\n  return new TerminalElt(elt)._set_(STYLE, BASE_ICONS_MAP.get('resource'));\r\n}\r\n\r\n/**\r\n * Create a node dsl tree.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function node(elt) {\r\n  return terminal(elt);\r\n}\r\n\r\n/**\r\n * Create a from dsl tree.\r\n * @param {array|object} elts - The elements.\r\n * @return {object} flow dsl.\r\n */\r\nexport function from(elt) {\r\n  return terminal(elt);\r\n}\r\n\r\n/**\r\n * Create a zeroOrMore dsl tree.\r\n * @param {object} elt - The element.\r\n * @return {object} flow dsl.\r\n */\r\nexport function zeroOrMore(elt) {\r\n  return optional(repeat(elt))._set_(STYLE, BASE_ICONS_MAP.get('zeroOrMore'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.zeroOrMore = function (...elts) {\r\n  let elt = zeroOrMore(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a resource dsl tree.\r\n * @param {object} elt - The element.\r\n * @return {object} resource dsl.\r\n */\r\nexport function resource(...elt) {\r\n  if (Array.isArray(elt) && elt.length > 1) {\r\n    return group(...elt);\r\n  } else {\r\n    return terminal(elt[0])._tagName_('resource')._set_(STYLE, BASE_ICONS_MAP.get('resource'));\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * Create a group dsl tree.\r\n * @param {object} elts - The elements.\r\n * @return {object} group dsl.\r\n */\r\nexport function group(...elts) {\r\n  return new GroupElt([...elts])._set_(STYLE, BASE_ICONS_MAP.get('group'));\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.group = function (...elts) {\r\n  let elt = group(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Create a block dsl tree.\r\n * @param {object} elts - The elements.\r\n * @return {object} group dsl.\r\n */\r\nexport function block(...elts) {\r\n  return group(...elts)._tagName_('block')._set_(STYLE, BASE_ICONS_MAP.get('group'));\r\n}\r\n\r\n/**\r\n * Tag as a source.\r\n * @param {object} elts - The elements to tags.\r\n * @return {object} tagged elements.\r\n */\r\nexport function source(...elts) {\r\n  if (Array.isArray(elts)) {\r\n    elts.forEach((elt) => {\r\n      this.toElt(elt).tag('source');\r\n    }, this);\r\n\r\n  } else {\r\n    this.toElt(elts).tag('source');\r\n  }\r\n  return elts;\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.source = function (...elts) {\r\n  let elt = source(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n\r\n/**\r\n * Tag as a source.\r\n * @param {object} elts - The elements to tags.\r\n * @return {object} tageed elements.\r\n */\r\nexport function sink(...elts) {\r\n  if (Array.isArray(elts)) {\r\n    elts.forEach((elt) => {\r\n      this.toElt(elt).tag('sink');\r\n    }, this);\r\n\r\n  } else {\r\n    this.toElt(elts).tag('sink');\r\n  }\r\n  return elts;\r\n}\r\n\r\n// Extend ResourceElt prototype\r\nResourceElt.prototype.sink = function (...elts) {\r\n  let elt = sink(...elts);\r\n  this.to(elt);\r\n  return elt;\r\n\r\n};\r\n// pipeline -> stages -> jobs -> tasks -> steps ","import {\r\n  jsonToDslObject\r\n} from '@imaguiraga/topology-dsl-core';\r\n/**\r\n * Class FlowUIDVisitor.\r\n */\r\nexport class FlowUIDVisitor {\r\n  /**\r\n   * Create a FlowUIDVisitor.\r\n   * @param {string} prefix - The UID prefix.\r\n   */\r\n  constructor(prefix) {\r\n    this._prefix = prefix || 'UID';\r\n  }\r\n\r\n  visit(_tree, filterFn) {\r\n    if (typeof _tree === 'undefined' || _tree === null) {\r\n      return null;\r\n    }\r\n    let tree = _tree;\r\n\r\n    // Add start finish properties if missing\r\n    tree = jsonToDslObject(tree);\r\n    return tree; // Skip UID rename\r\n  }\r\n\r\n  _visit_(_tree, filterFn) {\r\n    if (typeof _tree === 'undefined' || _tree === null) {\r\n      return null;\r\n    }\r\n    let tree = _tree;\r\n\r\n    // Add start finish properties if missing\r\n    tree = jsonToDslObject(tree);\r\n\r\n    // Non terminal nodes have start and finish\r\n    if (!tree.isTerminal()) {\r\n      tree.start.id = this._prefix + '_' + tree.subType + '_start';\r\n      tree.finish.id = this._prefix + '_' + tree.subType + '_finish';\r\n    }\r\n\r\n    tree.elts.filter(elt => elt instanceof Object).forEach(\r\n      (elt, index) => {\r\n        // keep only terminal nodes\r\n        let p = this._prefix.concat('_' + index);\r\n        elt.id = p + '_' + elt.subType;\r\n        elt.accept(new FlowUIDVisitor(p), null);\r\n      });\r\n    return tree;\r\n  }\r\n\r\n}\r\n","import {\r\n  isContainer\r\n} from '@imaguiraga/topology-dsl-core';\r\n\r\nconst UNIT = 8;\r\nexport class ELKDimensionVisitor {\r\n  constructor(\r\n    nodeWidth = (6 * UNIT),\r\n    nodeHeight = (4 * UNIT),\r\n    iconWidth = (2 * UNIT),\r\n    portSize = UNIT,\r\n    labelHeight = (2 * UNIT)\r\n  ) {\r\n    this._nodeWidth = nodeWidth;\r\n    this._nodeHeight = nodeHeight;\r\n    this._iconWidth = iconWidth;\r\n    this._portSize = portSize;\r\n    this._labelHeight = labelHeight;\r\n  }\r\n\r\n  nodeWidth(value) {\r\n    if (value !== undefined & value !== null) {\r\n      this._nodeWidth = value;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  nodeHeight(value) {\r\n    if (value !== undefined & value !== null) {\r\n      this._nodeHeight = value;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  labelHeight(value) {\r\n    if (value !== undefined & value !== null) {\r\n      this._labelHeight = value;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  iconWidth(value) {\r\n    if (value !== undefined & value !== null) {\r\n      this._iconWidth = value;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  portSize(value) {\r\n    if (value !== undefined & value !== null) {\r\n      this._portSize = value;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  visit(root) {\r\n    const stack = [root];\r\n    // FIFO\r\n    let i = 0;\r\n    while (i < stack.length) {\r\n      let tree = stack[i]; i++;\r\n      // Reset dimensions\r\n      if (tree === undefined || tree === null) {\r\n        return null;\r\n      }\r\n      if (tree.width !== undefined) {\r\n        delete tree.width;\r\n      }\r\n      if (tree.height !== undefined) {\r\n        delete tree.height;\r\n      }\r\n      if (tree.x !== undefined) {\r\n        delete tree.x;\r\n      }\r\n      if (tree.y !== undefined) {\r\n        delete tree.y;\r\n      }\r\n\r\n      // Set Node dimensions\r\n      if (isContainer(tree)) {\r\n        // Set node properties\r\n        tree.properties = {\r\n          'nodeLabels.placement': '[H_LEFT, V_TOP, INSIDE]'\r\n        };\r\n\r\n      } else {\r\n        // Terminal Nodes dimensions\r\n        const tagName = tree.model.tagName;\r\n        const style = (tree.model.data !== undefined) ? tree.model.data.style : null;\r\n        if (tagName === 'port' || tagName === 'start' || tagName === 'finish') {\r\n          tree.width = 1 * this._portSize;\r\n          tree.height = tree.width;\r\n\r\n        } else if (tagName === 'mark') {\r\n          tree.width = 0;// 2 * this._portSize;\r\n          tree.height = tree.width;\r\n\r\n        } else {\r\n          tree.width = 2 * this._nodeWidth;\r\n          tree.height = this._nodeHeight;\r\n          // Nodes with no style \r\n          if (style === undefined || style === null) {\r\n            let len = tree.model.title.length;\r\n            // Pt to Px 4/3\r\n            let w = Math.floor((len * UNIT * 2) / 3 + 6 * UNIT);\r\n            tree.width = w;\r\n            // How many lines\r\n            let nl = tree.model.title.split('\\n').length;\r\n            let h = Math.floor(nl * UNIT * 4 / 3) + 4 * UNIT;\r\n            tree.height = h;\r\n\r\n          }\r\n        }\r\n      }\r\n\r\n      // Set port dimensions\r\n      if (Array.isArray(tree.ports)) {\r\n        tree.ports.forEach((p) => {\r\n          p.width = 0;// this._portSize;\r\n          p.height = p.width;\r\n        }, this);\r\n\r\n      }\r\n\r\n      // Set label dimensions\r\n      if (Array.isArray(tree.labels)) {\r\n        tree.labels.forEach((l) => {\r\n          l.height = 2 * this._labelHeight;\r\n          //l.width = 3 * this._nodeWidth;\r\n        }, this);\r\n      }\r\n\r\n      if (Array.isArray(tree.children)) {\r\n        tree.children.forEach((n) => {\r\n          //this.visit(n);\r\n          stack.push(n);\r\n        }, this);\r\n      }\r\n    }\r\n    return root;\r\n  }\r\n\r\n}","import {\r\n  ResourceElt,\r\n  CompositeResourceElt\r\n} from './resource-base.js';\r\n\r\nexport function isContainer(n) {\r\n  return (n.children && n.children != null && n.children.length > 0) ||\r\n    (n && n.model && n.model.compound === true);\r\n}\r\n\r\nexport function clone_bak(obj) {\r\n  let copy = Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\r\n  return copy;\r\n}\r\n\r\n// Reset ids\r\nexport function resetIds(obj, idx) {\r\n  if (obj.id) {\r\n    // Append a suffix\r\n    obj.id = obj.id + '_' + idx;\r\n\r\n    if (obj._start !== null) {\r\n      obj._start.id = obj._start.id + '_' + idx;\r\n    }\r\n    if (obj._finish !== null) {\r\n      obj._finish.id = obj._finish.id + '_' + idx;\r\n    }\r\n  }\r\n  return obj;\r\n}\r\n\r\n// Clone and reset ids\r\nexport function clone(obj, idx) {\r\n  if (obj === undefined || obj === null) {\r\n    return obj;\r\n  }\r\n  let copy = Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\r\n  // Deep copy\r\n  if (copy.compound) {\r\n    if (Array.isArray(copy.elts)) {\r\n      copy.elts = copy.elts.map((elt) => {\r\n        return clone(elt, idx);\r\n      });\r\n    }\r\n  }\r\n\r\n  if (copy._start !== null) {\r\n    copy._start = clone(copy._start, idx);\r\n  }\r\n  if (copy._finish !== null) {\r\n    copy._finish = clone(copy._finish, idx);\r\n  }\r\n\r\n  return resetIds(copy, idx);\r\n}\r\n\r\n// This is an assign function that copies full descriptors\r\nexport function completeAssign(target, ...sources) {\r\n  sources.forEach(source => {\r\n    let descriptors = Object.keys(source).reduce((descriptors, key) => {\r\n      descriptors[key] = Object.getOwnPropertyDescriptor(source, key);\r\n      return descriptors;\r\n    }, {});\r\n\r\n    // By default, Object.assign copies enumerable Symbols, too\r\n    Object.getOwnPropertySymbols(source).forEach(sym => {\r\n      let descriptor = Object.getOwnPropertyDescriptor(source, sym);\r\n      if (descriptor.enumerable) {\r\n        descriptors[sym] = descriptor;\r\n      }\r\n    });\r\n    Object.defineProperties(target, descriptors);\r\n  });\r\n  return target;\r\n}\r\n//*/\r\n\r\nexport function jsonToDslObject(o) {\r\n  let result = o;\r\n  if (o.start === undefined) {\r\n    if (o.compound) {\r\n      Object.setPrototypeOf(o, CompositeResourceElt.prototype);\r\n    } else {\r\n      Object.setPrototypeOf(o, ResourceElt.prototype);\r\n    }\r\n    if (Array.isArray(result.elts)) {\r\n      // Recursively enrich elts\r\n      result.elts = result.elts.map((v) => {\r\n        return jsonToDslObject(v);\r\n      });\r\n    }\r\n  }\r\n  return result;\r\n}\r\n","//const ELK = require('elkjs');\r\nimport ELK from 'elkjs/lib/elk.bundled.js';\r\n\r\nimport {\r\n  //DslToELKGenerator,\r\n  ELKDimensionVisitor\r\n} from '../visitor/index.js';\r\n\r\n//const elkGenerator = new DslToELKGenerator();\r\nconst UNIT = 8;\r\n/*\r\nexport function toElkGraph(dslObject) {\r\n  let elkgraph = null;\r\n  try {\r\n    // dslObject to elkgraph\r\n    //elkgraph = elkGenerator.toElkGraph(dslObject);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return elkgraph;\r\n}\r\n// */\r\n\r\nexport function elkLayout() {\r\n  const elkDimensionVisitor = new ELKDimensionVisitor();\r\n  const elk = new ELK();\r\n  let options = {\r\n    'algorithm': 'layered',\r\n    //'hierarchyHandling': 'SEPARATE_CHILDREN',\r\n    'nodePlacement.strategy': 'SIMPLE',//'NETWORK_SIMPLEX', //'BRANDES_KOEPF'\r\n    'org.eclipse.elk.direction': 'RIGHT',\r\n    'port.borderOffset': UNIT / 4,\r\n    'padding': 2 * UNIT,\r\n    'edgeRouting': 'ORTHOGONAL',\r\n    'layered.mergeEdges': true,\r\n    'zoomToFit': true,\r\n    'spacing': 4 * UNIT,\r\n    'spacing.nodeNodeBetweenLayers': 4 * UNIT,\r\n    'spacing.edgeNodeBetweenLayers': 4 * UNIT,\r\n    'spacing.edgeEdgeBetweenLayers': 4 * UNIT,\r\n    //'layering.strategy': 'LONGEST_PATH', 'NETWORK_SIMPLEX'\r\n    'layering.strategy': 'COFFMAN_GRAHAM ',\r\n    'org.eclipse.elk.spacing.nodeSelfLoop': 3 * UNIT,\r\n    'spacing.labelNode': UNIT\r\n  };\r\n  const DEBUG = false;\r\n  //https://www.eclipse.org/elk/reference/options/org-eclipse-elk-layered-layering-strategy.html\r\n  //https://www.eclipse.org/elk/reference/options/org-eclipse-elk-layered-nodeplacement-strategy.html\r\n  function layoutFn(inelkgraph) {\r\n    if (inelkgraph === null) {\r\n      return Promise.resolve(null);\r\n    }\r\n    // Add node width.height\r\n    let elkgraph = elkDimensionVisitor.visit(inelkgraph);\r\n    if (elkgraph === null) {\r\n      return Promise.resolve(null);\r\n    }\r\n    if (DEBUG) {\r\n      console.log(JSON.stringify(elkgraph, null, '  '));\r\n    }\r\n\r\n    elk.knownLayoutOptions().then((d) => {\r\n      //console.log(d);\r\n    });\r\n    // start the layout\r\n    let elkpromise = elk.layout(elkgraph, {\r\n      layoutOptions: options,\r\n      logging: false,\r\n      measureExecutionTime: false\r\n    }).then((elkLayoutRelative) => {\r\n      const elkLayoutAbsolute = toAbsoluteElkLayout(elkLayoutRelative);\r\n      //console.log(elkLayoutAbsolute);\r\n      return elkLayoutAbsolute;\r\n    });\r\n\r\n    return elkpromise;\r\n  }\r\n\r\n  layoutFn.nodeHeight = function (newSize) {\r\n    if (!arguments.length) return elkDimensionVisitor._nodeHeight;\r\n    elkDimensionVisitor.nodeHeight(newSize);\r\n    return this;\r\n  };\r\n\r\n  layoutFn.nodeWidth = function (newSize) {\r\n    if (!arguments.length) return elkDimensionVisitor._nodeWidth;\r\n    elkDimensionVisitor.nodeWidth(newSize);\r\n    return this;\r\n  };\r\n\r\n  layoutFn.nodeSize = function (width, height) {\r\n    if (!arguments.length) return [elkDimensionVisitor._nodeWidth, elkDimensionVisitor._nodeHeight];\r\n\r\n    elkDimensionVisitor.nodeWidth(width);\r\n    elkDimensionVisitor.nodeHeight(height || width);\r\n\r\n    return this;\r\n  };\r\n\r\n  layoutFn.portSize = function (newSize) {\r\n    if (!arguments.length) return elkDimensionVisitor._portSize;\r\n    elkDimensionVisitor.portSize(newSize);\r\n    return this;\r\n  };\r\n\r\n  layoutFn.options = function (newOptions) {\r\n    if (!arguments.length) {\r\n      return options;\r\n    }\r\n    options = newOptions;\r\n    return this;\r\n  };\r\n\r\n  return layoutFn;\r\n}\r\n\r\nexport function toAbsoluteElkLayout(elkLayout) {\r\n  return toAbsoluteElkLayoutIt(elkLayout);\r\n}\r\n\r\nfunction toAbsoluteElkLayoutRec(elkNode, x0 = 0, y0 = 0) {\r\n  // Clone node \r\n  const n = elkNode;\r\n  // absolute coordinate\r\n  n.ax = n.x + x0;\r\n  n.ay = n.y + y0;\r\n\r\n  (n.labels || []).forEach((l) => {\r\n    // absolute coordinate\r\n    l.ax = l.x + x0;\r\n    l.ay = l.y + y0;\r\n  });\r\n\r\n  (elkNode.edges || []).forEach((e) => {\r\n    const t = e;\r\n    // absolute coordinate\r\n    t.source = e.sources[0];\r\n    t.target = e.targets[0];\r\n\r\n    // Update sections\r\n    (t.sections || []).forEach((s) => {\r\n      // junctionPoints\r\n      (s.junctionPoints || []).forEach((j) => {\r\n        j.ax = j.x + n.ax;\r\n        j.ay = j.y + n.ay;\r\n      });\r\n\r\n      // startPoint\r\n      s.startPoint.ax = s.startPoint.x + n.ax;\r\n      s.startPoint.ay = s.startPoint.y + n.ay;\r\n      // endPoint\r\n      s.endPoint.ax = s.endPoint.x + n.ax;\r\n      s.endPoint.ay = s.endPoint.y + n.ay;\r\n      // bendPoints\r\n      (s.bendPoints || []).forEach((b) => {\r\n        b.ax = b.x + n.ax;\r\n        b.ay = b.y + n.ay;\r\n      });\r\n    });\r\n\r\n  });\r\n\r\n  (elkNode.ports || []).forEach((p) => {\r\n    // absolute coordinate\r\n    p.ax = p.x + n.ax;\r\n    p.ay = p.y + n.ay;\r\n  });\r\n\r\n  (elkNode.children || []).forEach((c) => {\r\n    toAbsoluteElkLayoutRec(c, n.ax, n.ay);\r\n  });\r\n\r\n  return n;\r\n  //*/\r\n}\r\n\r\nexport function buildNodeLookup(elkNode) {\r\n  const index = new Map();\r\n\r\n  const stack = [elkNode];\r\n  // FIFO\r\n  let i = 0;\r\n  while (i < stack.length) {\r\n    //let n = stack.pop();\r\n    let n = stack[i];\r\n    i++;\r\n    index.set(n.id, n);\r\n\r\n    (n.ports || []).forEach((p) => {\r\n      stack.push(p);\r\n    });\r\n\r\n    (n.children || []).forEach((c) => {\r\n      stack.push(c);\r\n    });\r\n  }\r\n  return index;\r\n}\r\n\r\nfunction toAbsoluteElkLayoutIt(elkNode) {\r\n  // absolute coordinate\r\n  elkNode.ax = elkNode.x;\r\n  elkNode.ay = elkNode.y;\r\n  const stack = [elkNode];\r\n\r\n  let i = 0;\r\n  // FIFO\r\n  while (i < stack.length) {\r\n    let n = stack[i];\r\n    i++;\r\n    (n.labels || []).forEach((l) => {\r\n      // absolute coordinate\r\n      l.ax = l.x + n.ax;\r\n      l.ay = l.y + n.ay;\r\n    });\r\n\r\n    (n.edges || []).forEach((e) => {\r\n      const t = e;\r\n      // absolute coordinate\r\n      t.source = e.sources[0];\r\n      t.target = e.targets[0];\r\n\r\n      // Update sections\r\n      (t.sections || []).forEach((s) => {\r\n        // junctionPoints\r\n        (s.junctionPoints || []).forEach((j) => {\r\n          j.ax = j.x + n.ax;\r\n          j.ay = j.y + n.ay;\r\n        });\r\n\r\n        // startPoint\r\n        s.startPoint.ax = s.startPoint.x + n.ax;\r\n        s.startPoint.ay = s.startPoint.y + n.ay;\r\n        // endPoint\r\n        s.endPoint.ax = s.endPoint.x + n.ax;\r\n        s.endPoint.ay = s.endPoint.y + n.ay;\r\n        // bendPoints\r\n        (s.bendPoints || []).forEach((b) => {\r\n          b.ax = b.x + n.ax;\r\n          b.ay = b.y + n.ay;\r\n        });\r\n      });\r\n\r\n    });\r\n\r\n    (n.ports || []).forEach((p) => {\r\n      // absolute coordinate\r\n      p.ax = p.x + n.ax;\r\n      p.ay = p.y + n.ay;\r\n    });\r\n\r\n    (n.children || []).forEach((c) => {\r\n      c.ax = c.x + n.ax;\r\n      c.ay = c.y + n.ay;\r\n      stack.push(c);\r\n    });\r\n  }\r\n  return elkNode;\r\n}","import React from 'react'\r\nimport { Node } from '@antv/x6'\r\nimport '@antv/x6-react-shape'\r\n\r\nconst UNIT = 8;\r\nexport class ResourceNode extends React.Component<{ node?: Node }> {\r\n  shouldComponentUpdate() {\r\n    const { node } = this.props\r\n    if (node) {\r\n      if (node.hasChanged('data')) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  render() {\r\n    const { node } = this.props\r\n    const model = node?.getData() as any;\r\n    const style = model.data.style;\r\n    // IconPath\r\n    let iconPath = (style !== undefined && style !== null) ? encodeURI(style.iconURL) : null;\r\n    // If icon exists\r\n    let width = (model.compound === undefined || model.compound === true ? model.height : model.height / 2) - UNIT;\r\n    let height = width;\r\n\r\n    return (\r\n      <div style={{display: 'flex'}}>\r\n        {iconPath !== undefined && iconPath !== null && <img src={iconPath} width={width} height={height} />}\r\n        <div style={{display: 'inline-block',margin: 'auto'}}>\r\n        {style && style.product && <div><code>{style.product}</code></div>}\r\n          <div>\r\n            <code className=\"resource-title\">{model !== undefined ? model.title : ''}</code>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n/*\r\nGraph.registerEdge(\r\n  'dag-edge',\r\n  {\r\n    inherit: 'edge',\r\n    attrs: {\r\n      line: {\r\n        stroke: '#C2C8D5',\r\n        strokeWidth: 1,\r\n        targetMarker: null,\r\n      },\r\n    },\r\n  },\r\n  true,\r\n)\r\n\r\nGraph.registerConnector(\r\n  'algo-connector',\r\n  (s, e) => {\r\n    const offset = 4\r\n    const deltaY = Math.abs(e.y - s.y)\r\n    const control = Math.floor((deltaY / 3) * 2)\r\n\r\n    const v1 = { x: s.x, y: s.y + offset + control }\r\n    const v2 = { x: e.x, y: e.y - offset - control }\r\n\r\n    return Path.normalize(\r\n      `M ${s.x} ${s.y}\r\n       L ${s.x} ${s.y + offset}\r\n       C ${v1.x} ${v1.y} ${v2.x} ${v2.y} ${e.x} ${e.y - offset}\r\n       L ${e.x} ${e.y}\r\n      `,\r\n    )\r\n  },\r\n  true,\r\n)\r\n\r\nconst nodeStatusList = [\r\n  [\r\n    {\r\n      id: '1',\r\n      status: 'running',\r\n    },\r\n    {\r\n      id: '2',\r\n      status: 'default',\r\n    },\r\n    {\r\n      id: '3',\r\n      status: 'default',\r\n    },\r\n    {\r\n      id: '4',\r\n      status: 'default',\r\n    },\r\n  ],\r\n  [\r\n    {\r\n      id: '1',\r\n      status: 'success',\r\n    },\r\n    {\r\n      id: '2',\r\n      status: 'running',\r\n    },\r\n    {\r\n      id: '3',\r\n      status: 'default',\r\n    },\r\n    {\r\n      id: '4',\r\n      status: 'default',\r\n    },\r\n  ],\r\n  [\r\n    {\r\n      id: '1',\r\n      status: 'success',\r\n    },\r\n    {\r\n      id: '2',\r\n      status: 'success',\r\n    },\r\n    {\r\n      id: '3',\r\n      status: 'running',\r\n    },\r\n    {\r\n      id: '4',\r\n      status: 'running',\r\n    },\r\n  ],\r\n  [\r\n    {\r\n      id: '1',\r\n      status: 'success',\r\n    },\r\n    {\r\n      id: '2',\r\n      status: 'success',\r\n    },\r\n    {\r\n      id: '3',\r\n      status: 'success',\r\n    },\r\n    {\r\n      id: '4',\r\n      status: 'failed',\r\n    },\r\n  ],\r\n]\r\n\r\nconst graph: Graph = new Graph({\r\n  container: document.getElementById('container')!,\r\n  panning: {\r\n    enabled: true,\r\n    eventTypes: ['leftMouseDown', 'mouseWheel'],\r\n  },\r\n  mousewheel: {\r\n    enabled: true,\r\n    modifiers: 'ctrl',\r\n    factor: 1.1,\r\n    maxScale: 1.5,\r\n    minScale: 0.5,\r\n  },\r\n  highlighting: {\r\n    magnetAdsorbed: {\r\n      name: 'stroke',\r\n      args: {\r\n        attrs: {\r\n          fill: '#fff',\r\n          stroke: '#31d0c6',\r\n          strokeWidth: 4,\r\n        },\r\n      },\r\n    },\r\n  },\r\n  connecting: {\r\n    snap: true,\r\n    allowBlank: false,\r\n    allowLoop: false,\r\n    highlight: true,\r\n    connector: 'algo-connector',\r\n    connectionPoint: 'anchor',\r\n    anchor: 'center',\r\n    validateMagnet({ magnet }) {\r\n      return magnet.getAttribute('port-group') !== 'top'\r\n    },\r\n    createEdge() {\r\n      return graph.createEdge({\r\n        shape: 'dag-edge',\r\n        attrs: {\r\n          line: {\r\n            strokeDasharray: '5 5',\r\n          },\r\n        },\r\n        zIndex: -1,\r\n      })\r\n    },\r\n  },\r\n  selecting: {\r\n    enabled: true,\r\n    multiple: true,\r\n    rubberEdge: true,\r\n    rubberNode: true,\r\n    modifiers: 'shift',\r\n    rubberband: true,\r\n  },\r\n})\r\n\r\ngraph.on('edge:connected', ({ edge }) => {\r\n  edge.attr({\r\n    line: {\r\n      strokeDasharray: '',\r\n    },\r\n  })\r\n})\r\n\r\ngraph.on('node:change:data', ({ node }) => {\r\n  const edges = graph.getIncomingEdges(node)\r\n  const { status } = node.getData() as NodeStatus\r\n  edges?.forEach((edge) => {\r\n    if (status === 'running') {\r\n      edge.attr('line/strokeDasharray', 5)\r\n      edge.attr('line/style/animation', 'running-line 30s infinite linear')\r\n    } else {\r\n      edge.attr('line/strokeDasharray', '')\r\n      edge.attr('line/style/animation', '')\r\n    }\r\n  })\r\n})\r\n\r\n// 初始化节点/边\r\nconst init = (data: Cell.Metadata[]) => {\r\n  const cells: Cell[] = []\r\n  data.forEach((item) => {\r\n    if (item.shape === 'dag-node') {\r\n      cells.push(graph.createNode(item))\r\n    } else {\r\n      cells.push(graph.createEdge(item))\r\n    }\r\n  })\r\n  graph.resetCells(cells)\r\n}\r\n\r\n// 显示节点状态\r\nconst showNodeStatus = async (statusList: NodeStatus[][]) => {\r\n  const status = statusList.shift()\r\n  status?.forEach((item) => {\r\n    const { id, status } = item\r\n    const node = graph.getCellById(id)\r\n    const data = node.getData() as NodeStatus\r\n    node.setData({\r\n      ...data,\r\n      status: status,\r\n    })\r\n  })\r\n  setTimeout(() => {\r\n    showNodeStatus(statusList)\r\n  }, 3000)\r\n}\r\n\r\nfetch('../data/dag.json')\r\n  .then((response) => response.json())\r\n  .then((data) => {\r\n    init(data)\r\n    showNodeStatus(nodeStatusList)\r\n    graph.centerContent()\r\n  })\r\n\r\n\r\n// We use 'insert-css' to insert custom styles\r\n// It is recommended to add the style to your own style sheet files\r\n// If you want to copy the code directly, please remember to install the npm package 'insert-css\r\ninsertCss(`\r\n.node {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #fff;\r\n  border: 1px solid #c2c8d5;\r\n  border-left: 4px solid #5F95FF;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 5px 1px rgba(0, 0, 0, 0.06);\r\n}\r\n.node img {\r\n  width: 20px;\r\n  height: 20px;\r\n  flex-shrink: 0;\r\n  margin-left: 8px;\r\n}\r\n.node .label {\r\n  display: inline-block;\r\n  flex-shrink: 0;\r\n  width: 104px;\r\n  margin-left: 8px;\r\n  color: #666;\r\n  font-size: 12px;\r\n}\r\n.node .status {\r\n  flex-shrink: 0;\r\n}\r\n.node.success {\r\n  border-left: 4px solid #52c41a;\r\n}\r\n.node.failed {\r\n  border-left: 4px solid #ff4d4f;\r\n}\r\n.node.running .status img {\r\n  animation: spin 1s linear infinite;\r\n}\r\n.x6-node-selected .node {\r\n  border-color: #1890ff;\r\n  border-radius: 2px;\r\n  box-shadow: 0 0 0 4px #d4e8fe;\r\n}\r\n.x6-node-selected .node.success {\r\n  border-color: #52c41a;\r\n  border-radius: 2px;\r\n  box-shadow: 0 0 0 4px #ccecc0;\r\n}\r\n.x6-node-selected .node.failed {\r\n  border-color: #ff4d4f;\r\n  border-radius: 2px;\r\n  box-shadow: 0 0 0 4px #fedcdc;\r\n}\r\n.x6-edge:hover path:nth-child(2){\r\n  stroke: #1890ff;\r\n  stroke-width: 1px;\r\n}\r\n\r\n.x6-edge-selected path:nth-child(2){\r\n  stroke: #1890ff;\r\n  stroke-width: 1.5px !important;\r\n}\r\n\r\n@keyframes running-line {\r\n  to {\r\n    stroke-dashoffset: -1000;\r\n  }\r\n}\r\n@keyframes spin {\r\n  from {\r\n      transform: rotate(0deg);\r\n  }\r\n  to {\r\n      transform: rotate(360deg);\r\n  }\r\n}\r\n`)\r\n// */","import './style/x6-elk-style.css';\r\nimport React from 'react';\r\nimport { Graph, Point } from '@antv/x6';\r\nimport { elkLayout, buildNodeLookup } from './elk-layout-factory';\r\nimport { ResourceNode } from './node/reource-node';\r\n\r\nGraph.registerNode(\r\n  'resource-node',\r\n  {\r\n    inherit: 'react-shape',\r\n    width: 180,\r\n    height: 36,\r\n    component: <ResourceNode />,\r\n  },\r\n  true,\r\n)\r\n\r\nfunction lineRouter(vertices/*: Point.PointLike[]*/, args/*: RandomRouterArgs*/, view/*: EdgeView*/) {\r\n  const points = vertices.map((p) => Point.create(p));\r\n  return points;\r\n}\r\nconst LINE = 'line';\r\nconst DEBUG = true;\r\n\r\nGraph.registerRouter(LINE, lineRouter);\r\n\r\nconst UNIT = 8;\r\nconst EMPTY_ARRAY = [];\r\nexport function createElkX6Renderer(_container_, _minimap_, _width_, _height_, _iconWidth_) {\r\n\r\n  let containerElt = (typeof _container_ === 'string') ? document.getElementById(_container_) : _container_;\r\n\r\n  const width = (_width_ || containerElt.scrollWidth || 800);\r\n  const height = (_height_ || containerElt.scrollHeight || 800);\r\n\r\n  const x6Graph = createX6Graph(containerElt, _minimap_, width, height);\r\n  const toElkLayout = elkLayout();\r\n  toElkLayout.nodeSize(10 * UNIT).portSize(UNIT);\r\n\r\n  function render(elkgraph) {\r\n    if (elkgraph === null || elkgraph === undefined) {\r\n      return Promise.resolve(null);\r\n    }\r\n\r\n    const lookup = buildNodeLookup(elkgraph);\r\n\r\n    function refreshLayoutFn(_elkgraph_) {\r\n      return toElkLayout(_elkgraph_).then((elkLayout) => {\r\n        // Clear and redraw\r\n        // reset diagram\r\n        if (DEBUG) {\r\n          console.log(JSON.stringify(elkLayout, null, ' '));\r\n        }\r\n        const x6Layout = toX6Layout(elkLayout);\r\n        if (DEBUG) {\r\n          console.log(x6Layout);\r\n          console.log(JSON.stringify(x6Layout, null, ' '));\r\n        }\r\n        const start = new Date().getTime()\r\n        x6Graph.fromJSON(x6Layout);\r\n        x6Graph.unfreeze({\r\n          progress({ done }) {\r\n            if (done) {\r\n              const time = new Date().getTime() - start;\r\n              console.log(time)\r\n              x6Graph.unfreeze({\r\n                batchSize: 50,\r\n              })\r\n              x6Graph.zoomToFit({ padding: 8 })\r\n            }\r\n          },\r\n        })\r\n        return x6Graph;\r\n      }).catch((e) => {\r\n        console.log(e);\r\n      });\r\n    }\r\n\r\n    const toggleCollapseNode = function (d) {\r\n      if (d === undefined || d === null) {\r\n        return;\r\n      }\r\n      // is expanded\r\n      if (d.model.compound || d.collapsed === true) {\r\n        if (d.collapsed !== true) {\r\n          // Remove children and edges \r\n          d._children = d.children;\r\n          d.children = EMPTY_ARRAY;\r\n\r\n          d._edges = d.edges;\r\n          d.edges = null;\r\n          d.model.compound = false;\r\n          d.collapsed = true;\r\n\r\n        } else {\r\n          // Restore children and edges\r\n          d.children = d._children;\r\n          d._children = null;\r\n\r\n          d.edges = d._edges;\r\n          d._edges = null;\r\n          d.model.compound = true;\r\n          d.collapsed = false;\r\n        }\r\n\r\n        refreshLayoutFn(elkgraph);\r\n      }\r\n    };\r\n\r\n    x6Graph.on('node:dblclick', ({ e, x, y, node, view }) => {\r\n      if (DEBUG) {\r\n        console.log(node);\r\n      }\r\n      const elkLayoutNode = lookup.get(node.id);\r\n      toggleCollapseNode(elkLayoutNode);\r\n    });\r\n\r\n    //*/\r\n    return refreshLayoutFn(elkgraph);\r\n  }\r\n\r\n  return {\r\n    render,\r\n    graph: x6Graph\r\n  };\r\n}\r\n\r\nexport function toX6Layout(elkLayoutNode) {\r\n  return toX6LayoutRec(elkLayoutNode);\r\n}\r\n\r\nfunction toX6LayoutRec(elkLayoutNode, x6Layout = { nodes: [], edges: [] }) {\r\n  // Clone node \r\n  const n = createX6Node(elkLayoutNode, x6Layout);\r\n\r\n  const children = [];\r\n  (elkLayoutNode.children || []).forEach((c) => {\r\n    children.push(c.id);\r\n    toX6LayoutRec(c, x6Layout);\r\n  });\r\n\r\n  if (children.length > 0) {\r\n    n.children = children;\r\n  }\r\n\r\n  // Edges\r\n  (elkLayoutNode.edges || []).forEach((e) => {\r\n    const t = createX6Edge(e, x6Layout);\r\n  });\r\n  return x6Layout;\r\n}\r\n\r\nfunction createX6Node(elkLayoutNode, x6Layout) {\r\n  let model = elkLayoutNode.model || {};\r\n  const n = {\r\n    id: elkLayoutNode.id,\r\n    //label: elkLayoutNode.label,\r\n    data: {\r\n      ...model,\r\n      width: elkLayoutNode.width,\r\n      height: elkLayoutNode.height\r\n    },\r\n    x: elkLayoutNode.ax,\r\n    y: elkLayoutNode.ay,\r\n    width: elkLayoutNode.width,\r\n    height: elkLayoutNode.height,\r\n    attrs: {\r\n      body: {\r\n        class: 'node',\r\n      },\r\n      fo: {\r\n        class: 'node',\r\n      }\r\n    },\r\n  };\r\n  n.data.width = elkLayoutNode.width;\r\n  n.data.height = elkLayoutNode.height;\r\n\r\n  const clazz = ['node'];\r\n  if (elkLayoutNode.model !== undefined) {\r\n    clazz.push(elkLayoutNode.model.provider);\r\n    clazz.push(elkLayoutNode.model.kind);\r\n    clazz.push(elkLayoutNode.model.tagName);\r\n  }\r\n  n.attrs.body.class = clazz.join(' ');\r\n\r\n  // Ports\r\n  let PORT_RADIUS = 0;\r\n  const ports = (elkLayoutNode.ports || []);\r\n  const items = ports.map((p) => {\r\n    PORT_RADIUS = p.width / 2;\r\n    const r = {\r\n      group: 'abs',\r\n      id: p.id,\r\n      args: {\r\n        x: p.x + PORT_RADIUS,\r\n        y: p.y + PORT_RADIUS\r\n      },\r\n      data: p.model\r\n    };\r\n    return r;\r\n  });\r\n\r\n  if (ports.length > 0) {\r\n    n.ports = {\r\n      items: items,\r\n      groups: {\r\n        abs: {\r\n          position: {\r\n            name: 'absolute'\r\n          },\r\n          zIndex: 10,\r\n          attrs: {\r\n            circle: {\r\n              class: 'port',\r\n              r: PORT_RADIUS,\r\n              magnet: false,\r\n            },\r\n            text: {\r\n              fontSize: 0.8 * UNIT,\r\n              fill: '#444'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  //node_modules\\@antv\\x6\\lib\\shape\\standard\\html.d.ts\r\n  // Port rendering\r\n  const children = (elkLayoutNode.children || []);\r\n  const tagName = n.data.tagName;\r\n  if (tagName === 'port' || tagName === 'start' || tagName === 'finish' || tagName === 'mark') {\r\n    n.label = null;\r\n    n.data.compound = undefined;\r\n    n.shape = 'rect';\r\n    n.attrs = {\r\n      body: {\r\n        class: n.data.tagName,\r\n      },\r\n      text: {\r\n        fontSize: 0.8 * UNIT,\r\n        fill: '#444'\r\n      }\r\n    };\r\n    // Round corners\r\n    if (tagName === 'mark') {\r\n      n.label = null;// n.data.title;\r\n      n.attrs.body.rx = 0;// UNIT / 2;\r\n      n.attrs.body.ry = 0;// UNIT / 2;\r\n    }\r\n\r\n  } else {\r\n    if (children.length === 0) {\r\n      n.label = null;\r\n      n.shape = 'resource-node';\r\n\r\n    } else if (elkLayoutNode.labels !== undefined) {\r\n      const l = createX6Label(elkLayoutNode, x6Layout);\r\n    }\r\n  }\r\n\r\n  n.attrs.body.strokeWidth = (children.length > 0) ? '0px' : '1px';\r\n  n.attrs.body.opacity = (children.length > 0) ? 0.15 : 0.9;\r\n  x6Layout.nodes.push(n);\r\n  return n;\r\n}\r\n\r\nfunction createX6Label(elkLayoutNode, x6Layout) {\r\n  const label = elkLayoutNode.labels[0];\r\n  // Label Node\r\n  const model = elkLayoutNode.model || {};\r\n  const l = {\r\n    id: elkLayoutNode.id + '.label',\r\n    //label: elkLayoutNode.label,\r\n    data: {\r\n      ...model,\r\n      width: 30 * UNIT,//label.width,\r\n      height: label.height,\r\n    },\r\n    x: label.ax,\r\n    y: label.ay,\r\n    width: elkLayoutNode.width,// - 1.5 * UNIT,\r\n    height: label.height,\r\n    attrs: {\r\n      body: {\r\n        class: 'label',\r\n      },\r\n      fo: {\r\n        class: 'label',\r\n      }\r\n    },\r\n\r\n  };\r\n  l.data.compound = undefined;\r\n  l.label = null;\r\n  l.shape = 'resource-node';\r\n\r\n  x6Layout.nodes.push(l);\r\n  return l;\r\n}\r\n\r\nfunction createX6Edge(e, x6Layout) {\r\n  const t = {\r\n    attrs: {\r\n      line: {\r\n        class: `edge ${e.model.tagName}`,\r\n        sourceMarker: {\r\n          name: e.style.startArrow ? 'classic' : null,\r\n          size: UNIT\r\n        },\r\n        targetMarker: {\r\n          name: e.style.endArrow ? 'classic' : null,\r\n          size: UNIT\r\n        },\r\n      }\r\n    }\r\n  };\r\n\r\n  t.id = e.id;\r\n  t.data = e.model;\r\n  const source = e.sources[0];\r\n  const target = e.targets[0];\r\n  const regex1 = /\\.(start|finish)/ig;\r\n  const regex2 = /\\.(start|finish)\\.port/ig;\r\n\r\n  if (source.match(regex2)) {\r\n    t.source = { cell: source };\r\n  } else {\r\n    t.source = { cell: source.replace(regex1, ''), port: source };\r\n  }\r\n\r\n  if (target.match(regex2)) {\r\n    t.target = { cell: target };\r\n  } else {\r\n    t.target = { cell: target.replace(regex1, ''), port: target };\r\n  }\r\n\r\n  if (e.sections !== undefined) {\r\n    let d = e.sections[0];\r\n\r\n    if (d.startPoint && d.endPoint) {\r\n      /*     \r\n      t.source = {\r\n        x: d.startPoint.ax,\r\n        y: d.startPoint.ay\r\n      };\r\n\r\n      t.target = {\r\n        x: d.endPoint.ax,\r\n        y: d.endPoint.ay\r\n      };\r\n      //*/\r\n    }\r\n\r\n    const vertices = [];\r\n    (d.bendPoints || []).forEach(function (bp, i) {\r\n      vertices.push({ x: bp.ax, y: bp.ay });\r\n    });\r\n\r\n    (d.junctionPoints || []).forEach(function (bp, i) {\r\n      vertices.push({ x: bp.ax, y: bp.ay });\r\n    });\r\n\r\n    if (vertices.length > 0) {\r\n      t.vertices = vertices;\r\n    }\r\n  }\r\n  x6Layout.edges.push(t);\r\n\r\n  return t;\r\n}\r\n\r\nfunction createX6Graph(containerElt, minimapContainer, width, height) {\r\n  const x6Graph = new Graph({\r\n    container: containerElt,\r\n    grid: 1,\r\n    //width: width,\r\n    //height: height,\r\n    //resizing: false,\r\n    background: {\r\n      color: '#fff',\r\n    },\r\n    interacting: false,\r\n    async: true,\r\n    frozen: true,\r\n    sorting: 'approx',\r\n    scroller: {\r\n      enabled: true,\r\n      pannable: true,\r\n      pageVisible: true,\r\n      pageBreak: true,\r\n      //  className: 'app-content-pane'\r\n    },\r\n    panning: {\r\n      enabled: true,\r\n      modifiers: 'shift',\r\n    },\r\n    mousewheel: {\r\n      enabled: true,\r\n      modifiers: ['ctrl', 'meta'],\r\n    },\r\n    connecting: {\r\n      //snap: true,\r\n      allowBlank: false,\r\n      allowLoop: false,\r\n      highlight: true,\r\n      anchor: 'orth',\r\n      connector: 'rounded',\r\n      connectionPoint: 'boundary',\r\n      router: {\r\n        // https://x6.antv.vision/en/docs/tutorial/basic/edge/#router\r\n        // node_modules\\@antv\\x6\\lib\\registry\\router\r\n        // https://x6.antv.vision/en/docs/api/registry/router#oneside\r\n        // er orth metro manhattan https://x6.antv.vision/en/examples/edge/edge#edge\r\n        name: LINE,\r\n      }\r\n    },\r\n    minimap: {\r\n      enabled: true,\r\n      container: minimapContainer,\r\n      minScale: 0.5,\r\n      maxScale: 2,\r\n      padding: UNIT / 2,\r\n      width: 200,\r\n      height: 160\r\n    },\r\n  });\r\n\r\n  x6Graph.on('cell:mouseenter', ({ e, cell, view }) => {\r\n    if (cell.isNode() && cell.getData().compound !== undefined) {\r\n      cell.addTools([\r\n        {\r\n          name: 'boundary',\r\n          args: {\r\n            padding: 0,\r\n            useCellGeometry: true,\r\n            attrs: {\r\n              fill: 'lightgrey',\r\n              stroke: 'blue',\r\n              strokeWidth: 3,\r\n              strokeDasharray: 'none',\r\n              fillOpacity: 0.45,\r\n            },\r\n          },\r\n        },\r\n      ]);\r\n    }\r\n  });\r\n\r\n  x6Graph.on('cell:mouseleave', ({ e, cell, view }) => {\r\n    cell.removeTools();\r\n  });\r\n  //*/\r\n  return x6Graph;\r\n}","export const sample = {\r\n  \"id\": \"$root\",\r\n  \"layoutOptions\": {\r\n   \"algorithm\": \"layered\",\r\n   \"elk.hierarchyHandling\": \"SEPARATE_CHILDREN\"\r\n  },\r\n  \"children\": [\r\n   {\r\n    \"id\": \"sequence.17\",\r\n    \"label\": \"sequence.17\",\r\n    \"model\": {\r\n     \"kind\": \"sequence\",\r\n     \"title\": \"sequence.17\",\r\n     \"direction\": null,\r\n     \"tagName\": \"sequence\",\r\n     \"id\": \"sequence.17\",\r\n     \"provider\": \"default\",\r\n     \"compound\": true,\r\n     \"data\": {\r\n      \"style\": {\r\n       \"className\": \"sequence\",\r\n       \"provider\": \"default\",\r\n       \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n      }\r\n     }\r\n    },\r\n    \"labels\": [\r\n     {\r\n      \"text\": \"sequence.17\",\r\n      \"properties\": {\r\n       \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n      }\r\n     }\r\n    ],\r\n    \"ports\": [\r\n     {\r\n      \"id\": \"sequence.17.start\",\r\n      \"label\": \"sequence.17.start\",\r\n      \"model\": {\r\n       \"kind\": \"port\",\r\n       \"tagName\": \"port\",\r\n       \"compound\": false,\r\n       \"provider\": \"custom\",\r\n       \"id\": \"sequence.17.start\"\r\n      },\r\n      \"labels\": []\r\n     },\r\n     {\r\n      \"id\": \"sequence.17.finish\",\r\n      \"label\": \"sequence.17.finish\",\r\n      \"model\": {\r\n       \"kind\": \"port\",\r\n       \"tagName\": \"port\",\r\n       \"compound\": false,\r\n       \"provider\": \"custom\",\r\n       \"id\": \"sequence.17.finish\"\r\n      },\r\n      \"labels\": []\r\n     }\r\n    ],\r\n    \"children\": [\r\n     {\r\n      \"id\": \"sequence.17.start.port\",\r\n      \"label\": \"sequence.17.start\",\r\n      \"model\": {\r\n       \"kind\": \"port\",\r\n       \"tagName\": \"start\",\r\n       \"compound\": false,\r\n       \"provider\": \"custom\",\r\n       \"id\": \"sequence.17.start.port\"\r\n      },\r\n      \"labels\": []\r\n     },\r\n     {\r\n      \"id\": \"sequence.17.finish.port\",\r\n      \"label\": \"sequence.17.finish\",\r\n      \"model\": {\r\n       \"kind\": \"port\",\r\n       \"tagName\": \"finish\",\r\n       \"compound\": false,\r\n       \"provider\": \"custom\",\r\n       \"id\": \"sequence.17.finish.port\"\r\n      },\r\n      \"labels\": []\r\n     },\r\n     {\r\n      \"id\": \"edge.6.link\",\r\n      \"label\": \"sequence.17.start\",\r\n      \"model\": {\r\n       \"kind\": \"port\",\r\n       \"tagName\": \"start\",\r\n       \"compound\": false,\r\n       \"provider\": \"custom\",\r\n       \"id\": \"sequence.17.start.port\"\r\n      },\r\n      \"labels\": []\r\n     },\r\n     {\r\n      \"id\": \"resource.3\",\r\n      \"label\": \"a\",\r\n      \"model\": {\r\n       \"kind\": \"resource\",\r\n       \"title\": \"a\",\r\n       \"direction\": null,\r\n       \"tagName\": \"resource\",\r\n       \"id\": \"resource.3\",\r\n       \"provider\": \"default\",\r\n       \"compound\": false,\r\n       \"data\": {\r\n        \"style\": null\r\n       }\r\n      },\r\n      \"labels\": [],\r\n      \"ports\": [\r\n       {\r\n        \"id\": \"resource.3.start\",\r\n        \"label\": \"resource.3.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.3.start\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"resource.3.finish\",\r\n        \"label\": \"resource.3.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.3.finish\"\r\n        },\r\n        \"labels\": []\r\n       }\r\n      ],\r\n      \"children\": [],\r\n      \"edges\": [],\r\n      \"parent\": {\r\n       \"id\": \"sequence.17\",\r\n       \"label\": \"sequence.17\",\r\n       \"model\": {\r\n        \"kind\": \"sequence\",\r\n        \"title\": \"sequence.17\",\r\n        \"direction\": null,\r\n        \"tagName\": \"sequence\",\r\n        \"id\": \"sequence.17\",\r\n        \"provider\": \"default\",\r\n        \"compound\": true,\r\n        \"data\": {\r\n         \"style\": {\r\n          \"className\": \"sequence\",\r\n          \"provider\": \"default\",\r\n          \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n         }\r\n        }\r\n       },\r\n       \"labels\": [\r\n        {\r\n         \"text\": \"sequence.17\",\r\n         \"properties\": {\r\n          \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n         }\r\n        }\r\n       ]\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"resource.4\",\r\n      \"label\": \"b\",\r\n      \"model\": {\r\n       \"kind\": \"resource\",\r\n       \"title\": \"b\",\r\n       \"direction\": null,\r\n       \"tagName\": \"resource\",\r\n       \"id\": \"resource.4\",\r\n       \"provider\": \"default\",\r\n       \"compound\": false,\r\n       \"data\": {\r\n        \"style\": null\r\n       }\r\n      },\r\n      \"labels\": [],\r\n      \"ports\": [\r\n       {\r\n        \"id\": \"resource.4.start\",\r\n        \"label\": \"resource.4.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.4.start\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"resource.4.finish\",\r\n        \"label\": \"resource.4.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.4.finish\"\r\n        },\r\n        \"labels\": []\r\n       }\r\n      ],\r\n      \"children\": [],\r\n      \"edges\": [],\r\n      \"parent\": {\r\n       \"id\": \"sequence.17\",\r\n       \"label\": \"sequence.17\",\r\n       \"model\": {\r\n        \"kind\": \"sequence\",\r\n        \"title\": \"sequence.17\",\r\n        \"direction\": null,\r\n        \"tagName\": \"sequence\",\r\n        \"id\": \"sequence.17\",\r\n        \"provider\": \"default\",\r\n        \"compound\": true,\r\n        \"data\": {\r\n         \"style\": {\r\n          \"className\": \"sequence\",\r\n          \"provider\": \"default\",\r\n          \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n         }\r\n        }\r\n       },\r\n       \"labels\": [\r\n        {\r\n         \"text\": \"sequence.17\",\r\n         \"properties\": {\r\n          \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n         }\r\n        }\r\n       ]\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"sequence.11\",\r\n      \"label\": \"sequence.11\",\r\n      \"model\": {\r\n       \"kind\": \"sequence\",\r\n       \"title\": \"sequence.11\",\r\n       \"direction\": null,\r\n       \"tagName\": \"sequence\",\r\n       \"id\": \"sequence.11\",\r\n       \"provider\": \"default\",\r\n       \"compound\": true,\r\n       \"data\": {\r\n        \"style\": {\r\n         \"className\": \"sequence\",\r\n         \"provider\": \"default\",\r\n         \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n        }\r\n       }\r\n      },\r\n      \"labels\": [\r\n       {\r\n        \"text\": \"sequence.11\",\r\n        \"properties\": {\r\n         \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n        }\r\n       }\r\n      ],\r\n      \"ports\": [\r\n       {\r\n        \"id\": \"sequence.11.start\",\r\n        \"label\": \"sequence.11.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"sequence.11.start\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"sequence.11.finish\",\r\n        \"label\": \"sequence.11.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"sequence.11.finish\"\r\n        },\r\n        \"labels\": []\r\n       }\r\n      ],\r\n      \"children\": [\r\n       {\r\n        \"id\": \"sequence.11.start.port\",\r\n        \"label\": \"sequence.11.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"start\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"sequence.11.start.port\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"sequence.11.finish.port\",\r\n        \"label\": \"sequence.11.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"finish\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"sequence.11.finish.port\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"resource.5\",\r\n        \"label\": \"a\",\r\n        \"model\": {\r\n         \"kind\": \"resource\",\r\n         \"title\": \"a\",\r\n         \"direction\": null,\r\n         \"tagName\": \"resource\",\r\n         \"id\": \"resource.5\",\r\n         \"provider\": \"default\",\r\n         \"compound\": false,\r\n         \"data\": {\r\n          \"style\": null\r\n         }\r\n        },\r\n        \"labels\": [],\r\n        \"ports\": [\r\n         {\r\n          \"id\": \"resource.5.start\",\r\n          \"label\": \"resource.5.start\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.5.start\"\r\n          },\r\n          \"labels\": []\r\n         },\r\n         {\r\n          \"id\": \"resource.5.finish\",\r\n          \"label\": \"resource.5.finish\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.5.finish\"\r\n          },\r\n          \"labels\": []\r\n         }\r\n        ],\r\n        \"children\": [],\r\n        \"edges\": [],\r\n        \"parent\": {\r\n         \"id\": \"sequence.11\",\r\n         \"label\": \"sequence.11\",\r\n         \"model\": {\r\n          \"kind\": \"sequence\",\r\n          \"title\": \"sequence.11\",\r\n          \"direction\": null,\r\n          \"tagName\": \"sequence\",\r\n          \"id\": \"sequence.11\",\r\n          \"provider\": \"default\",\r\n          \"compound\": true,\r\n          \"data\": {\r\n           \"style\": {\r\n            \"className\": \"sequence\",\r\n            \"provider\": \"default\",\r\n            \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n           }\r\n          }\r\n         },\r\n         \"labels\": [\r\n          {\r\n           \"text\": \"sequence.11\",\r\n           \"properties\": {\r\n            \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"resource.6\",\r\n        \"label\": \"b\",\r\n        \"model\": {\r\n         \"kind\": \"resource\",\r\n         \"title\": \"b\",\r\n         \"direction\": null,\r\n         \"tagName\": \"resource\",\r\n         \"id\": \"resource.6\",\r\n         \"provider\": \"default\",\r\n         \"compound\": false,\r\n         \"data\": {\r\n          \"style\": null\r\n         }\r\n        },\r\n        \"labels\": [],\r\n        \"ports\": [\r\n         {\r\n          \"id\": \"resource.6.start\",\r\n          \"label\": \"resource.6.start\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.6.start\"\r\n          },\r\n          \"labels\": []\r\n         },\r\n         {\r\n          \"id\": \"resource.6.finish\",\r\n          \"label\": \"resource.6.finish\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.6.finish\"\r\n          },\r\n          \"labels\": []\r\n         }\r\n        ],\r\n        \"children\": [],\r\n        \"edges\": [],\r\n        \"parent\": {\r\n         \"id\": \"sequence.11\",\r\n         \"label\": \"sequence.11\",\r\n         \"model\": {\r\n          \"kind\": \"sequence\",\r\n          \"title\": \"sequence.11\",\r\n          \"direction\": null,\r\n          \"tagName\": \"sequence\",\r\n          \"id\": \"sequence.11\",\r\n          \"provider\": \"default\",\r\n          \"compound\": true,\r\n          \"data\": {\r\n           \"style\": {\r\n            \"className\": \"sequence\",\r\n            \"provider\": \"default\",\r\n            \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n           }\r\n          }\r\n         },\r\n         \"labels\": [\r\n          {\r\n           \"text\": \"sequence.11\",\r\n           \"properties\": {\r\n            \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"resource.13\",\r\n        \"label\": \"merge\",\r\n        \"model\": {\r\n         \"kind\": \"resource\",\r\n         \"title\": \"merge\",\r\n         \"direction\": null,\r\n         \"tagName\": \"resource\",\r\n         \"id\": \"resource.13\",\r\n         \"provider\": \"default\",\r\n         \"compound\": false,\r\n         \"data\": {}\r\n        },\r\n        \"labels\": [],\r\n        \"ports\": [\r\n         {\r\n          \"id\": \"resource.13.start\",\r\n          \"label\": \"resource.13.start\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.13.start\"\r\n          },\r\n          \"labels\": []\r\n         },\r\n         {\r\n          \"id\": \"resource.13.finish\",\r\n          \"label\": \"resource.13.finish\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.13.finish\"\r\n          },\r\n          \"labels\": []\r\n         }\r\n        ],\r\n        \"children\": [],\r\n        \"edges\": [],\r\n        \"parent\": {\r\n         \"id\": \"sequence.11\",\r\n         \"label\": \"sequence.11\",\r\n         \"model\": {\r\n          \"kind\": \"sequence\",\r\n          \"title\": \"sequence.11\",\r\n          \"direction\": null,\r\n          \"tagName\": \"sequence\",\r\n          \"id\": \"sequence.11\",\r\n          \"provider\": \"default\",\r\n          \"compound\": true,\r\n          \"data\": {\r\n           \"style\": {\r\n            \"className\": \"sequence\",\r\n            \"provider\": \"default\",\r\n            \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n           }\r\n          }\r\n         },\r\n         \"labels\": [\r\n          {\r\n           \"text\": \"sequence.11\",\r\n           \"properties\": {\r\n            \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"group.9\",\r\n        \"label\": \"group.9\",\r\n        \"model\": {\r\n         \"kind\": \"group\",\r\n         \"title\": \"group.9\",\r\n         \"direction\": null,\r\n         \"tagName\": \"group\",\r\n         \"id\": \"group.9\",\r\n         \"provider\": \"default\",\r\n         \"compound\": true,\r\n         \"data\": {\r\n          \"style\": {\r\n           \"className\": \"group\",\r\n           \"provider\": \"default\",\r\n           \"iconURL\": \"assets/icons/base/group-grid-fill.svg\"\r\n          }\r\n         }\r\n        },\r\n        \"labels\": [\r\n         {\r\n          \"text\": \"group.9\",\r\n          \"properties\": {\r\n           \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n          }\r\n         }\r\n        ],\r\n        \"ports\": [\r\n         {\r\n          \"id\": \"group.9.start\",\r\n          \"label\": \"group.9.start\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"group.9.start\"\r\n          },\r\n          \"labels\": []\r\n         },\r\n         {\r\n          \"id\": \"group.9.finish\",\r\n          \"label\": \"group.9.finish\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"group.9.finish\"\r\n          },\r\n          \"labels\": []\r\n         }\r\n        ],\r\n        \"children\": [\r\n         {\r\n          \"id\": \"resource.7\",\r\n          \"label\": \"c\",\r\n          \"model\": {\r\n           \"kind\": \"resource\",\r\n           \"title\": \"c\",\r\n           \"direction\": null,\r\n           \"tagName\": \"resource\",\r\n           \"id\": \"resource.7\",\r\n           \"provider\": \"default\",\r\n           \"compound\": false,\r\n           \"data\": {\r\n            \"style\": null\r\n           }\r\n          },\r\n          \"labels\": [],\r\n          \"ports\": [\r\n           {\r\n            \"id\": \"resource.7.start\",\r\n            \"label\": \"resource.7.start\",\r\n            \"model\": {\r\n             \"kind\": \"port\",\r\n             \"tagName\": \"port\",\r\n             \"compound\": false,\r\n             \"provider\": \"custom\",\r\n             \"id\": \"resource.7.start\"\r\n            },\r\n            \"labels\": []\r\n           },\r\n           {\r\n            \"id\": \"resource.7.finish\",\r\n            \"label\": \"resource.7.finish\",\r\n            \"model\": {\r\n             \"kind\": \"port\",\r\n             \"tagName\": \"port\",\r\n             \"compound\": false,\r\n             \"provider\": \"custom\",\r\n             \"id\": \"resource.7.finish\"\r\n            },\r\n            \"labels\": []\r\n           }\r\n          ],\r\n          \"children\": [],\r\n          \"edges\": [],\r\n          \"parent\": {\r\n           \"id\": \"group.9\",\r\n           \"label\": \"group.9\",\r\n           \"model\": {\r\n            \"kind\": \"group\",\r\n            \"title\": \"group.9\",\r\n            \"direction\": null,\r\n            \"tagName\": \"group\",\r\n            \"id\": \"group.9\",\r\n            \"provider\": \"default\",\r\n            \"compound\": true,\r\n            \"data\": {\r\n             \"style\": {\r\n              \"className\": \"group\",\r\n              \"provider\": \"default\",\r\n              \"iconURL\": \"assets/icons/base/group-grid-fill.svg\"\r\n             }\r\n            }\r\n           },\r\n           \"labels\": [\r\n            {\r\n             \"text\": \"group.9\",\r\n             \"properties\": {\r\n              \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n             }\r\n            }\r\n           ]\r\n          }\r\n         },\r\n         {\r\n          \"id\": \"resource.8\",\r\n          \"label\": \"d\",\r\n          \"model\": {\r\n           \"kind\": \"resource\",\r\n           \"title\": \"d\",\r\n           \"direction\": null,\r\n           \"tagName\": \"resource\",\r\n           \"id\": \"resource.8\",\r\n           \"provider\": \"default\",\r\n           \"compound\": false,\r\n           \"data\": {\r\n            \"style\": null\r\n           }\r\n          },\r\n          \"labels\": [],\r\n          \"ports\": [\r\n           {\r\n            \"id\": \"resource.8.start\",\r\n            \"label\": \"resource.8.start\",\r\n            \"model\": {\r\n             \"kind\": \"port\",\r\n             \"tagName\": \"port\",\r\n             \"compound\": false,\r\n             \"provider\": \"custom\",\r\n             \"id\": \"resource.8.start\"\r\n            },\r\n            \"labels\": []\r\n           },\r\n           {\r\n            \"id\": \"resource.8.finish\",\r\n            \"label\": \"resource.8.finish\",\r\n            \"model\": {\r\n             \"kind\": \"port\",\r\n             \"tagName\": \"port\",\r\n             \"compound\": false,\r\n             \"provider\": \"custom\",\r\n             \"id\": \"resource.8.finish\"\r\n            },\r\n            \"labels\": []\r\n           }\r\n          ],\r\n          \"children\": [],\r\n          \"edges\": [],\r\n          \"parent\": {\r\n           \"id\": \"group.9\",\r\n           \"label\": \"group.9\",\r\n           \"model\": {\r\n            \"kind\": \"group\",\r\n            \"title\": \"group.9\",\r\n            \"direction\": null,\r\n            \"tagName\": \"group\",\r\n            \"id\": \"group.9\",\r\n            \"provider\": \"default\",\r\n            \"compound\": true,\r\n            \"data\": {\r\n             \"style\": {\r\n              \"className\": \"group\",\r\n              \"provider\": \"default\",\r\n              \"iconURL\": \"assets/icons/base/group-grid-fill.svg\"\r\n             }\r\n            }\r\n           },\r\n           \"labels\": [\r\n            {\r\n             \"text\": \"group.9\",\r\n             \"properties\": {\r\n              \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n             }\r\n            }\r\n           ]\r\n          }\r\n         }\r\n        ],\r\n        \"edges\": [],\r\n        \"parent\": {\r\n         \"id\": \"sequence.11\",\r\n         \"label\": \"sequence.11\",\r\n         \"model\": {\r\n          \"kind\": \"sequence\",\r\n          \"title\": \"sequence.11\",\r\n          \"direction\": null,\r\n          \"tagName\": \"sequence\",\r\n          \"id\": \"sequence.11\",\r\n          \"provider\": \"default\",\r\n          \"compound\": true,\r\n          \"data\": {\r\n           \"style\": {\r\n            \"className\": \"sequence\",\r\n            \"provider\": \"default\",\r\n            \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n           }\r\n          }\r\n         },\r\n         \"labels\": [\r\n          {\r\n           \"text\": \"sequence.11\",\r\n           \"properties\": {\r\n            \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"resource.10\",\r\n        \"label\": \"e\",\r\n        \"model\": {\r\n         \"kind\": \"resource\",\r\n         \"title\": \"e\",\r\n         \"direction\": null,\r\n         \"tagName\": \"resource\",\r\n         \"id\": \"resource.10\",\r\n         \"provider\": \"default\",\r\n         \"compound\": false,\r\n         \"data\": {\r\n          \"style\": null\r\n         }\r\n        },\r\n        \"labels\": [],\r\n        \"ports\": [\r\n         {\r\n          \"id\": \"resource.10.start\",\r\n          \"label\": \"resource.10.start\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.10.start\"\r\n          },\r\n          \"labels\": []\r\n         },\r\n         {\r\n          \"id\": \"resource.10.finish\",\r\n          \"label\": \"resource.10.finish\",\r\n          \"model\": {\r\n           \"kind\": \"port\",\r\n           \"tagName\": \"port\",\r\n           \"compound\": false,\r\n           \"provider\": \"custom\",\r\n           \"id\": \"resource.10.finish\"\r\n          },\r\n          \"labels\": []\r\n         }\r\n        ],\r\n        \"children\": [],\r\n        \"edges\": [],\r\n        \"parent\": {\r\n         \"id\": \"sequence.11\",\r\n         \"label\": \"sequence.11\",\r\n         \"model\": {\r\n          \"kind\": \"sequence\",\r\n          \"title\": \"sequence.11\",\r\n          \"direction\": null,\r\n          \"tagName\": \"sequence\",\r\n          \"id\": \"sequence.11\",\r\n          \"provider\": \"default\",\r\n          \"compound\": true,\r\n          \"data\": {\r\n           \"style\": {\r\n            \"className\": \"sequence\",\r\n            \"provider\": \"default\",\r\n            \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n           }\r\n          }\r\n         },\r\n         \"labels\": [\r\n          {\r\n           \"text\": \"sequence.11\",\r\n           \"properties\": {\r\n            \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n           }\r\n          }\r\n         ]\r\n        }\r\n       }\r\n      ],\r\n      \"edges\": [\r\n       {\r\n        \"id\": \"edge.15\",\r\n        \"sources\": [\r\n         \"sequence.11.start.port\"\r\n        ],\r\n        \"targets\": [\r\n         \"resource.5.start\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"edge.16\",\r\n        \"sources\": [\r\n         \"sequence.11.start.port\"\r\n        ],\r\n        \"targets\": [\r\n         \"resource.6.start\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"edge.17\",\r\n        \"sources\": [\r\n         \"resource.5.finish\"\r\n        ],\r\n        \"targets\": [\r\n         \"resource.13.start\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"edge.18\",\r\n        \"sources\": [\r\n         \"resource.6.finish\"\r\n        ],\r\n        \"targets\": [\r\n         \"resource.13.start\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"edge.19\",\r\n        \"sources\": [\r\n         \"resource.13.finish\"\r\n        ],\r\n        \"targets\": [\r\n         \"group.9.start\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"edge.20\",\r\n        \"sources\": [\r\n         \"group.9.finish\"\r\n        ],\r\n        \"targets\": [\r\n         \"resource.10.start\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       },\r\n       {\r\n        \"id\": \"edge.21\",\r\n        \"sources\": [\r\n         \"resource.10.finish\"\r\n        ],\r\n        \"targets\": [\r\n         \"sequence.11.finish.port\"\r\n        ],\r\n        \"model\": {\r\n         \"provider\": \"default\",\r\n         \"tagName\": \"edge\",\r\n         \"kind\": \"edge\"\r\n        },\r\n        \"style\": {\r\n         \"startArrow\": false,\r\n         \"endArrow\": true\r\n        }\r\n       }\r\n      ],\r\n      \"parent\": {\r\n       \"id\": \"sequence.17\",\r\n       \"label\": \"sequence.17\",\r\n       \"model\": {\r\n        \"kind\": \"sequence\",\r\n        \"title\": \"sequence.17\",\r\n        \"direction\": null,\r\n        \"tagName\": \"sequence\",\r\n        \"id\": \"sequence.17\",\r\n        \"provider\": \"default\",\r\n        \"compound\": true,\r\n        \"data\": {\r\n         \"style\": {\r\n          \"className\": \"sequence\",\r\n          \"provider\": \"default\",\r\n          \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n         }\r\n        }\r\n       },\r\n       \"labels\": [\r\n        {\r\n         \"text\": \"sequence.17\",\r\n         \"properties\": {\r\n          \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n         }\r\n        }\r\n       ]\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"resource.14\",\r\n      \"label\": \"c\",\r\n      \"model\": {\r\n       \"kind\": \"resource\",\r\n       \"title\": \"c\",\r\n       \"direction\": null,\r\n       \"tagName\": \"resource\",\r\n       \"id\": \"resource.14\",\r\n       \"provider\": \"default\",\r\n       \"compound\": false,\r\n       \"data\": {\r\n        \"style\": null\r\n       }\r\n      },\r\n      \"labels\": [],\r\n      \"ports\": [\r\n       {\r\n        \"id\": \"resource.14.start\",\r\n        \"label\": \"resource.14.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.14.start\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"resource.14.finish\",\r\n        \"label\": \"resource.14.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.14.finish\"\r\n        },\r\n        \"labels\": []\r\n       }\r\n      ],\r\n      \"children\": [],\r\n      \"edges\": [],\r\n      \"parent\": {\r\n       \"id\": \"sequence.17\",\r\n       \"label\": \"sequence.17\",\r\n       \"model\": {\r\n        \"kind\": \"sequence\",\r\n        \"title\": \"sequence.17\",\r\n        \"direction\": null,\r\n        \"tagName\": \"sequence\",\r\n        \"id\": \"sequence.17\",\r\n        \"provider\": \"default\",\r\n        \"compound\": true,\r\n        \"data\": {\r\n         \"style\": {\r\n          \"className\": \"sequence\",\r\n          \"provider\": \"default\",\r\n          \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n         }\r\n        }\r\n       },\r\n       \"labels\": [\r\n        {\r\n         \"text\": \"sequence.17\",\r\n         \"properties\": {\r\n          \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n         }\r\n        }\r\n       ]\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"resource.15\",\r\n      \"label\": \"d\",\r\n      \"model\": {\r\n       \"kind\": \"resource\",\r\n       \"title\": \"d\",\r\n       \"direction\": null,\r\n       \"tagName\": \"resource\",\r\n       \"id\": \"resource.15\",\r\n       \"provider\": \"default\",\r\n       \"compound\": false,\r\n       \"data\": {\r\n        \"style\": null\r\n       }\r\n      },\r\n      \"labels\": [],\r\n      \"ports\": [\r\n       {\r\n        \"id\": \"resource.15.start\",\r\n        \"label\": \"resource.15.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.15.start\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"resource.15.finish\",\r\n        \"label\": \"resource.15.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.15.finish\"\r\n        },\r\n        \"labels\": []\r\n       }\r\n      ],\r\n      \"children\": [],\r\n      \"edges\": [],\r\n      \"parent\": {\r\n       \"id\": \"sequence.17\",\r\n       \"label\": \"sequence.17\",\r\n       \"model\": {\r\n        \"kind\": \"sequence\",\r\n        \"title\": \"sequence.17\",\r\n        \"direction\": null,\r\n        \"tagName\": \"sequence\",\r\n        \"id\": \"sequence.17\",\r\n        \"provider\": \"default\",\r\n        \"compound\": true,\r\n        \"data\": {\r\n         \"style\": {\r\n          \"className\": \"sequence\",\r\n          \"provider\": \"default\",\r\n          \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n         }\r\n        }\r\n       },\r\n       \"labels\": [\r\n        {\r\n         \"text\": \"sequence.17\",\r\n         \"properties\": {\r\n          \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n         }\r\n        }\r\n       ]\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"resource.16\",\r\n      \"label\": \"e\",\r\n      \"model\": {\r\n       \"kind\": \"resource\",\r\n       \"title\": \"e\",\r\n       \"direction\": null,\r\n       \"tagName\": \"resource\",\r\n       \"id\": \"resource.16\",\r\n       \"provider\": \"default\",\r\n       \"compound\": false,\r\n       \"data\": {\r\n        \"style\": null\r\n       }\r\n      },\r\n      \"labels\": [],\r\n      \"ports\": [\r\n       {\r\n        \"id\": \"resource.16.start\",\r\n        \"label\": \"resource.16.start\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.16.start\"\r\n        },\r\n        \"labels\": []\r\n       },\r\n       {\r\n        \"id\": \"resource.16.finish\",\r\n        \"label\": \"resource.16.finish\",\r\n        \"model\": {\r\n         \"kind\": \"port\",\r\n         \"tagName\": \"port\",\r\n         \"compound\": false,\r\n         \"provider\": \"custom\",\r\n         \"id\": \"resource.16.finish\"\r\n        },\r\n        \"labels\": []\r\n       }\r\n      ],\r\n      \"children\": [],\r\n      \"edges\": [],\r\n      \"parent\": {\r\n       \"id\": \"sequence.17\",\r\n       \"label\": \"sequence.17\",\r\n       \"model\": {\r\n        \"kind\": \"sequence\",\r\n        \"title\": \"sequence.17\",\r\n        \"direction\": null,\r\n        \"tagName\": \"sequence\",\r\n        \"id\": \"sequence.17\",\r\n        \"provider\": \"default\",\r\n        \"compound\": true,\r\n        \"data\": {\r\n         \"style\": {\r\n          \"className\": \"sequence\",\r\n          \"provider\": \"default\",\r\n          \"iconURL\": \"assets/icons/base/sequence-diagram-3-fill.svg\"\r\n         }\r\n        }\r\n       },\r\n       \"labels\": [\r\n        {\r\n         \"text\": \"sequence.17\",\r\n         \"properties\": {\r\n          \"nodeLabels.placement\": \"[V_TOP, H_LEFT, OUTSIDE]\"\r\n         }\r\n        }\r\n       ]\r\n      }\r\n     }\r\n    ],\r\n    \"edges\": [\r\n     {\r\n      \"id\": \"edge.3\",\r\n      \"sources\": [\r\n       \"sequence.17.start.port\"\r\n      ],\r\n      \"targets\": [\r\n       \"resource.3.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.4\",\r\n      \"sources\": [\r\n       \"sequence.17.start.port\"\r\n      ],\r\n      \"targets\": [\r\n       \"resource.4.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.5\",\r\n      \"sources\": [\r\n       \"sequence.17.start.port\"\r\n      ],\r\n      \"targets\": [\r\n       \"sequence.11.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.7\",\r\n      \"sources\": [\r\n       \"resource.3.finish\"\r\n      ],\r\n      \"targets\": [\r\n       \"edge.6.link\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.8\",\r\n      \"sources\": [\r\n       \"resource.4.finish\"\r\n      ],\r\n      \"targets\": [\r\n       \"edge.6.link\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.9\",\r\n      \"sources\": [\r\n       \"sequence.11.finish\"\r\n      ],\r\n      \"targets\": [\r\n       \"edge.6.link\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.10\",\r\n      \"sources\": [\r\n       \"edge.6.link\"\r\n      ],\r\n      \"targets\": [\r\n       \"resource.14.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.11\",\r\n      \"sources\": [\r\n       \"edge.6.link\"\r\n      ],\r\n      \"targets\": [\r\n       \"resource.15.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.12\",\r\n      \"sources\": [\r\n       \"resource.14.finish\"\r\n      ],\r\n      \"targets\": [\r\n       \"resource.16.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.13\",\r\n      \"sources\": [\r\n       \"resource.15.finish\"\r\n      ],\r\n      \"targets\": [\r\n       \"resource.16.start\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     },\r\n     {\r\n      \"id\": \"edge.14\",\r\n      \"sources\": [\r\n       \"resource.16.finish\"\r\n      ],\r\n      \"targets\": [\r\n       \"sequence.17.finish.port\"\r\n      ],\r\n      \"model\": {\r\n       \"provider\": \"default\",\r\n       \"tagName\": \"edge\",\r\n       \"kind\": \"edge\"\r\n      },\r\n      \"style\": {\r\n       \"startArrow\": false,\r\n       \"endArrow\": true\r\n      }\r\n     }\r\n    ]\r\n   }\r\n  ]\r\n };","import './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nimport 'es6-promise/auto';  // polyfill Promise on IE\r\n\r\nimport * as diagram from './preview/diagram';\r\n\r\nimport { sample } from './sample.js';\r\n\r\nconst contentPane = document.getElementById('root');\r\nconst selectElt: HTMLSelectElement = (document.getElementById('select') as HTMLSelectElement);\r\nconst minimapContainer = document.getElementById('mini-map');\r\nminimapContainer?.setAttribute('class', 'minimap-container');\r\n\r\nconst renderer = diagram.createElkX6Renderer(contentPane, minimapContainer);\r\n\r\nfunction resizeWindow() {\r\n\r\n  renderer.graph.resize(\r\n    window.document.documentElement.clientWidth,\r\n    window.document.documentElement.clientHeight - selectElt.offsetHeight\r\n  );\r\n\r\n  renderer.graph.centerContent();\r\n  renderer.graph.zoomToFit({ padding: 8 });\r\n  console.log('onresize');\r\n}\r\n\r\nlet listener: any = null;\r\nlet curParams: any = null;\r\nfunction updateSelection(params: any) {\r\n  let curSelection = null;\r\n  if (curParams !== null && curParams.key === params.key) {\r\n    // Find current selection\r\n    curSelection = selectElt?.value;\r\n  }\r\n\r\n  //CurrentSelection has been removed\r\n  if (curSelection !== null && !params.values.has(curSelection)) {\r\n    curSelection = null;\r\n  }\r\n\r\n  curParams = params;\r\n  // Populate select component from list of samples\r\n  // Recreate flow options\r\n  while (selectElt?.firstChild) {\r\n    selectElt.firstChild.remove();\r\n  }\r\n\r\n  params.values.forEach((value: any, key: any) => {\r\n    let opt = document.createElement('option');\r\n    opt.value = key;\r\n    opt.text = params.key + ' - ' + key;\r\n    selectElt?.add(opt);\r\n  });\r\n\r\n  if (listener != null) {\r\n    selectElt?.removeEventListener('change', listener);\r\n    listener = null;\r\n  }\r\n\r\n  // Display flow\r\n  // Update flow when the selection changes \r\n  if (listener == null) {\r\n    listener = (event: Event) => {\r\n      const result = params.values.get((event.target as any).value);\r\n      renderer.render(result);\r\n    };\r\n    selectElt?.addEventListener('change', listener);\r\n  }\r\n  //selectElt.options[0].selected = true;\r\n  selectElt.value = curSelection !== null ? curSelection : selectElt.options[0].value;\r\n  selectElt.dispatchEvent(new Event('change'));\r\n\r\n}\r\n\r\nconst messageCallbackFn = function (event: any) {\r\n  if (event.data.jsonrpc !== undefined) {\r\n    console.log('event => ' + event.data.method);\r\n    if (event.data.method === 'view.update') {\r\n      // Convert entries array to map\r\n      renderer.render(event.data.params);\r\n    } else if (event.data.method === 'selection.update') {\r\n      // Convert entries array to map\r\n      updateSelection(event.data.params);\r\n    }\r\n  }\r\n};\r\n\r\nwindow.addEventListener('message', (event) => {\r\n  if (event.origin !== window.location.origin) {\r\n    //return;\r\n  }\r\n  console.log('=> Window.onmessage' + event);\r\n  messageCallbackFn(event);\r\n\r\n}, false);\r\n\r\n\r\nwindow.addEventListener('resize', resizeWindow);\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\nrenderer.render(sample);\r\n\r\n"],"sourceRoot":""}